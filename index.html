<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>The Byzantine General — Home</title>
  <style>
  @import url('https://fonts.googleapis.com/css2?family=PT+Serif:ital,wght@0,400;0,700;1,400;1,700&family=PT+Sans+Narrow:wght@400;700&family=Inter:wght@300;400;500;600&family=JetBrains+Mono:wght@300;400&display=swap');

  /* Page containers — each is a fixed full-screen scroll container */
  #intro-page, #act1-page, #act2-page, #act3-page, #act4-page, #act5-page, #act6-page, #act7-page {
    position: fixed; top: 0; left: 0; right: 0; bottom: 0;
    overflow-y: auto; overflow-x: hidden;
    display: none;
    background: var(--bg);
    z-index: 500;
  }
  #landing-scroll-container {
    display: none;
    position: relative;
    background: var(--bg);
  }
  #landing-scroll-container.visible { display: block; }

  *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

  :root {
    --bg: #0a0a0a;
    --bg-card: #111111;
    --bg-surface: #0f0f0f;
    --text: #ededed;
    --text-dim: #9a9a9a;
    --text-muted: #5a5a5a;
    --accent: #c9a96e;
    --accent-dim: #8a7448;
    --border: #1a1a1a;
    --border-dim: #222222;
    --border-strong: #333333;
    --overlay-bg: rgba(10,10,10,0.88);
    --serif: 'PT Serif', Georgia, serif;
    --sans: 'Inter', -apple-system, sans-serif;
    --mono: 'JetBrains Mono', monospace;
  }
  body.light-mode {
    --bg: #ffffff;
    --bg-card: #ffffff;
    --bg-surface: #f8f9fa;
    --text: #1a1a1a;
    --text-dim: #4a4a4a;
    --text-muted: #8a8a8a;
    --accent: #b8943e;
    --accent-dim: #8a7448;
    --border: #e5e5e5;
    --border-dim: #d5d5d5;
    --border-strong: #c0c0c0;
    --overlay-bg: rgba(255,255,255,0.92);
  }

  /* Light-mode overrides for gradients and rgba colors */
  body.light-mode .mosaic-tile::after {
    background: linear-gradient(180deg, rgba(0,0,0,0.03) 0%, rgba(0,0,0,0.12) 100%);
  }
  body.light-mode .video-play-overlay { background: rgba(0,0,0,0.12); }
  body.light-mode .video-play-overlay:hover { background: rgba(0,0,0,0.06); }
  body.light-mode .video-caption {
    background: linear-gradient(transparent, rgba(0,0,0,0.5));
  }
  body.light-mode .landing-hero { background: var(--bg); }
  body.light-mode #flashSequence { background: var(--bg); }
  body.light-mode .artboard-nav a:hover {
    border-color: rgba(0,0,0,0.15);
    background: rgba(0,0,0,0.04);
    color: var(--text);
  }
  body.light-mode .expand-card:hover {
    box-shadow: 0 0 20px rgba(185,148,62,0.1);
  }
  body.light-mode .expand-card.active {
    box-shadow: 0 0 30px rgba(185,148,62,0.15);
  }
  body.light-mode .gate-section::before {
    background: radial-gradient(ellipse at center, rgba(185,148,62,0.05) 0%, transparent 70%);
  }
  body.light-mode .gate-form input[type="email"] {
    background: var(--bg-card);
    color: var(--text);
  }
  body.light-mode .gate-form input[type="email"]:focus {
    border-color: var(--accent);
  }
  body.light-mode .play-button {
    border-left-color: var(--text);
  }
  /* Light mode: slightly desaturate editorial images differently */
  body.light-mode .editorial-image img {
    filter: grayscale(30%) contrast(1.05);
  }
  body.light-mode .editorial-image:hover img {
    filter: grayscale(0%) contrast(1);
  }
  body.light-mode .act1-card-img {
    filter: grayscale(30%) contrast(1.05);
  }
  body.light-mode .act1-card-img:hover {
    filter: grayscale(0%) contrast(1);
  }
  /* Light mode timeline, blends perfectly since it's white */
  body.light-mode .timeline-container {
    border-bottom: 1px solid var(--border);
  }
  /* Light mode mosaic tile adjustments */
  body.light-mode .mosaic-tile img {
    filter: grayscale(60%) contrast(1.1) brightness(0.75);
  }
  body.light-mode .artboard-canvas:hover .mosaic-tile img {
    filter: grayscale(80%) contrast(0.9) brightness(0.5);
  }
  body.light-mode .artboard-canvas .mosaic-tile:hover img {
    filter: grayscale(10%) contrast(1.05) brightness(0.9);
  }

  /* Theme toggle button */
  #themeToggle {
    position: fixed;
    top: 8px;
    right: 8px;
    z-index: 9999;
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 50%;
    width: 36px;
    height: 36px;
    cursor: pointer;
    font-size: 18px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    color: var(--text-dim);
  }
  #themeToggle:hover {
    border-color: var(--accent-dim);
    color: var(--accent);
  }

  html { scroll-behavior: smooth; }
  body {
    background: var(--bg);
    color: var(--text);
    font-family: var(--sans);
    overflow-x: hidden;
    -webkit-font-smoothing: antialiased;
  }

  /* ═══════════════════════════════════════
     LOADING SCREEN, RAPID FLASH
  ═══════════════════════════════════════ */
  #loader {
    position: fixed; inset: 0; z-index: 1000;
    background: var(--bg);
    display: flex; flex-direction: column;
    align-items: center; justify-content: center;
    cursor: default;
    transition: opacity 0.8s ease, visibility 0.8s ease;
  }
  #loader.hidden { opacity: 0; visibility: hidden; pointer-events: none; }

  /* ═══════════════════════════════════════
     SCROLL-DRIVEN LANDING PAGE
  ═══════════════════════════════════════ */
  #landing-scroll-container.visible { display: block; }

  /* Title hero, first viewport, background image with Satoshi mask & Bitcoin */
  .landing-hero {
    height: 100vh;
    display: flex; flex-direction: column;
    align-items: center; justify-content: center;
    position: relative;
    z-index: 2;
    background: #000;
  }
  /* Background image layer — fades in from black */
  .landing-hero::before {
    content: '';
    position: absolute;
    inset: 0;
    background: url('https://i.postimg.cc/KzKxwh5P/Sat-bit-dark.png') center center / cover no-repeat;
    opacity: 0;
    animation: heroImageFadeIn 2.5s ease-out 0.5s forwards;
    z-index: 0;
  }
  /* Dark overlay on top of image */
  .landing-hero::after {
    content: '';
    position: absolute;
    inset: 0;
    background: rgba(0,0,0,0.45);
    z-index: 1;
  }
  /* Keep all text above the overlay */
  .landing-hero > * {
    position: relative;
    z-index: 2;
  }
  @keyframes heroImageFadeIn {
    0% { opacity: 0; }
    100% { opacity: 1; }
  }
  .landing-hero .loader-number {
    font-family: var(--mono); font-size: 12px; color: rgba(255,255,255,0.7);
    letter-spacing: 3px; opacity: 1;
    text-shadow: 0 2px 8px rgba(0,0,0,0.8);
  }
  .landing-hero .loader-title {
    font-family: var(--serif); font-size: clamp(32px, 6vw, 64px);
    font-weight: 400; letter-spacing: 0.06em;
    text-transform: uppercase; color: #fff; text-align: center;
    opacity: 1; animation: none;
    text-shadow: 0 2px 16px rgba(0,0,0,0.9), 0 0 40px rgba(0,0,0,0.6);
  }
  .landing-hero .loader-subtitle {
    font-family: var(--serif); font-size: clamp(14px, 2.5vw, 22px);
    font-weight: 400; font-style: italic; letter-spacing: 0.02em;
    color: rgba(255,255,255,0.85); text-align: center;
    opacity: 1; animation: none;
    margin-top: 12px;
    text-shadow: 0 2px 8px rgba(0,0,0,0.8);
  }
  .landing-scroll-hint {
    font-family: var(--mono); font-size: 10px; letter-spacing: 3px;
    text-transform: uppercase; color: var(--accent);
    margin-top: 48px;
    animation: pulse 1.5s ease-in-out infinite;
  }
  .landing-scroll-arrow {
    margin-top: 16px;
    width: 20px; height: 20px;
    border-right: 1px solid var(--accent-dim);
    border-bottom: 1px solid var(--accent-dim);
    transform: rotate(45deg);
    animation: bobDown 2s ease-in-out infinite;
  }
  @keyframes bobDown {
    0%, 100% { transform: rotate(45deg) translateY(0); opacity: 0.4; }
    50% { transform: rotate(45deg) translateY(6px); opacity: 1; }
  }

  /* Artboard tiles viewport, sticky */
  .landing-tiles-viewport {
    position: sticky;
    top: 0;
    height: 100vh;
    overflow: hidden;
    z-index: 1;
  }

  /* Scroll spacer, creates scroll distance for tile reveal + exploration */
  .landing-tiles-spacer {
    height: 600vh;
    position: relative;
    margin-top: -100vh; /* overlap the sticky viewport */
  }

  /* Matrix rain reveal, column drops in and becomes visible */
  .mosaic-column.col-revealed {
    opacity: 1 !important;
  }
  /* Column exit, fades out and drifts away */
  .mosaic-column.col-exiting {
    opacity: 0 !important;
  }

  /* CTA section after tiles */
  .landing-cta-section {
    position: relative;
    z-index: 2;
    display: flex; flex-direction: column;
    align-items: center; justify-content: center;
    min-height: 100vh;
    background: var(--bg);
    padding: 80px 40px;
    text-align: center;
  }
  .landing-cta-section h2 {
    font-family: var(--serif); font-size: clamp(28px, 4vw, 48px);
    font-weight: 400; letter-spacing: 0.02em;
    color: var(--text);
    margin-bottom: 16px;
  }
  .landing-cta-section p {
    font-family: var(--serif); font-size: clamp(14px, 2vw, 18px);
    font-weight: 400; font-style: italic;
    color: var(--text-dim);
    max-width: 500px;
    margin-bottom: 48px;
    line-height: 1.7;
  }
  .landing-cta-btn {
    font-family: var(--mono); font-size: 11px; letter-spacing: 3px;
    text-transform: uppercase;
    color: var(--accent); background: transparent;
    border: 1px solid var(--accent-dim);
    padding: 16px 48px;
    cursor: pointer;
    transition: all 0.4s ease;
    text-decoration: none;
    display: inline-block;
  }
  .landing-cta-btn:hover {
    background: var(--accent);
    color: var(--bg);
    border-color: var(--accent);
    transform: translateY(-1px);
    box-shadow: 0 4px 20px rgba(201, 169, 110, 0.2);
  }
  .landing-cta-btn:active {
    transform: translateY(0);
  }

  #flashSequence {
    position: relative;
    width: 160px; height: 220px;
    overflow: hidden;
    border: 1px solid var(--border-dim);
    background: #fff;
    transition: opacity 0.3s ease;
  }

  .loader-image-container {
    position: absolute; inset: 0;
    opacity: 0;
  }

  .loader-image-container img {
    width: 100%; height: 100%;
    object-fit: cover;
    filter: grayscale(100%) contrast(1.3);
  }

  /* Loading progress bar */
  .loader-progress {
    width: 160px;
    height: 2px;
    background: var(--border-dim);
    margin-top: 16px;
    position: relative;
    overflow: hidden;
  }
  .loader-progress-fill {
    height: 100%;
    width: 0%;
    background: var(--accent);
    transition: width 0.3s ease;
  }

  .loader-overlay {
    position: absolute; inset: 0;
    display: none; flex-direction: column;
    align-items: center; justify-content: center;
    gap: 32px; z-index: 10;
  }

  .loader-number {
    font-family: var(--mono); font-size: 12px; color: var(--text-muted);
    letter-spacing: 3px; opacity: 0;
    animation: fadeIn 0.6s ease 0.2s forwards;
  }

  .loader-title {
    font-family: var(--serif); font-size: clamp(32px, 6vw, 64px);
    font-weight: 400; letter-spacing: 0.06em;
    text-transform: uppercase; color: var(--text); opacity: 0;
    animation: fadeIn 0.6s ease 0.6s forwards; text-align: center;
  }

  .loader-subtitle {
    font-family: var(--serif); font-size: clamp(14px, 2.5vw, 22px);
    font-weight: 400; font-style: italic; letter-spacing: 0.02em;
    color: var(--text-dim); opacity: 0;
    animation: fadeIn 0.6s ease 0.9s forwards; text-align: center;
  }

  .loader-enter {
    font-family: var(--mono); font-size: 10px; letter-spacing: 3px;
    text-transform: uppercase; color: var(--accent);
    opacity: 0; animation: pulse 1.5s ease-in-out 1.5s infinite;
  }

  @keyframes pulse {
    0%, 100% { opacity: 0.3; }
    50% { opacity: 1; }
  }

  @keyframes fadeIn { to { opacity: 1; } }
  @keyframes flashIn { 0% { opacity: 1; } 80% { opacity: 1; } 100% { opacity: 0; } }

  /* ═══════════════════════════════════════
     ARTBOARD, Masonry Columns with Parallax
  ═══════════════════════════════════════ */
  #artboard-section {
    width: 100%; height: 100%;
    position: absolute; top: 0; left: 0;
    overflow: hidden;
    background: var(--bg);
  }

  .artboard-header {
    position: fixed; top: 0; left: 0; right: 0; z-index: 200;
    padding: 0 40px;
    height: 52px;
    display: flex; justify-content: space-between; align-items: center;
    background: var(--overlay-bg);
    backdrop-filter: blur(12px);
    border-bottom: 1px solid var(--border);
  }
  .artboard-logo {
    font-family: var(--serif); font-size: 13px; font-weight: 700;
    letter-spacing: 3px; text-transform: uppercase; color: var(--text);
  }
  .artboard-nav {
    display: flex; gap: 8px; align-items: center;
  }
  .artboard-nav a {
    font-family: var(--mono); font-size: 9px; letter-spacing: 2px;
    text-transform: uppercase; color: var(--text-dim);
    text-decoration: none; cursor: pointer;
    padding: 8px 16px;
    border: 1px solid transparent;
    border-radius: 2px;
    transition: color 0.3s ease, border-color 0.3s ease, background 0.3s ease;
  }
  .artboard-nav a:hover {
    color: var(--text);
    border-color: rgba(255,255,255,0.15);
    background: rgba(255,255,255,0.04);
  }
  .artboard-nav a.nav-primary {
    color: var(--accent);
    border-color: var(--accent-dim);
  }
  .artboard-nav a.nav-primary:hover {
    background: rgba(201, 169, 110, 0.1);
    border-color: var(--accent);
    color: var(--accent);
  }

  .artboard-canvas-container {
    position: absolute;
    inset: 0;
  }
  .artboard-canvas {
    position: absolute;
    inset: 0;
    cursor: grab;
    will-change: transform;
    touch-action: none;
    user-select: none;
    overflow: visible;
  }
  .artboard-canvas.dragging { cursor: grabbing; }

  /* Each column is a vertical strip of tiles, absolute positioned for infinite tiling */
  .mosaic-column {
    position: absolute;
    top: 0;
    display: flex;
    flex-direction: column;
    gap: 4px;
    width: 320px;
    will-change: transform, opacity;
    opacity: 0;
    /* JS sets custom transition per column for staggered rain effect */
  }

  .mosaic-tile {
    position: relative; overflow: hidden;
    background: var(--bg);
    width: 320px;
    flex-shrink: 0;
    cursor: pointer;
  }

  .mosaic-tile img {
    width: 100%; height: 100%; object-fit: cover;
    filter: grayscale(100%) contrast(1.2) brightness(0.55);
    transition: filter 0.5s ease;
    pointer-events: none;
    display: block;
  }

  /* Dark overlay on every tile for mood */
  .mosaic-tile::after {
    content: '';
    position: absolute; inset: 0;
    background: linear-gradient(180deg, rgba(0,0,0,0.15) 0%, rgba(0,0,0,0.4) 100%);
    pointer-events: none;
    transition: opacity 0.5s ease;
  }

  /* Hover: hovered tile reveals more, others dim further */
  .artboard-canvas:hover .mosaic-tile img {
    filter: grayscale(100%) contrast(0.8) brightness(0.3);
  }
  .artboard-canvas:hover .mosaic-tile::after {
    opacity: 1;
  }
  .artboard-canvas .mosaic-tile:hover img {
    filter: grayscale(30%) contrast(1.1) brightness(0.75);
  }
  .artboard-canvas .mosaic-tile:hover::after {
    opacity: 0;
  }
  .mosaic-tile:hover { z-index: 10; }

  /* Tile overlays removed, tiles are purely visual */

  @keyframes shimmerSweep {
    0% {
      background: linear-gradient(90deg, transparent 0%, var(--accent-dim) 50%, transparent 100%);
      background-size: 200% 100%;
      background-position: -200% 0;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    100% {
      background-position: 200% 0;
    }
  }

  .span-2c { grid-column: span 2; }
  .span-3c { grid-column: span 3; }
  .span-2r { grid-row: span 2; }
  .span-tall { grid-row: span 2; }
  .span-wide { grid-column: span 2; }
  .span-hero { grid-column: span 3; grid-row: span 2; }

  /* Custom Scrollbar Navigation, hidden for infinite scroll */
  .scrollbar-track {
    position: fixed;
    background: var(--border);
    z-index: 90;
    display: none;
  }

  .scrollbar-track.horizontal {
    bottom: 100px;
    left: 24px;
    right: 220px;
    height: 6px;
    border-radius: 3px;
  }

  .scrollbar-track.vertical {
    right: 24px;
    bottom: 160px;
    top: 80px;
    width: 6px;
    border-radius: 3px;
  }

  .scrollbar-thumb {
    position: absolute;
    background: var(--accent-dim);
    border-radius: 3px;
    cursor: grab;
    transition: background 0.2s ease;
    min-width: 30px;
    min-height: 30px;
  }
  .scrollbar-thumb:hover {
    background: var(--accent);
  }
  .scrollbar-track.horizontal .scrollbar-thumb {
    height: 100%;
    top: 0;
  }
  .scrollbar-track.vertical .scrollbar-thumb {
    width: 100%;
    left: 0;
  }

  .scrollbar-thumb:active { cursor: grabbing; }

  /* Instruction panel */
  .artboard-intro-panel {
    position: fixed; bottom: 24px; left: 24px; right: 24px;
    z-index: 150; background: var(--overlay-bg); border: 1px solid var(--border-strong);
    padding: 20px 28px; display: none; align-items: center; gap: 24px;
    opacity: 0; transition: opacity 0.6s ease;
    backdrop-filter: blur(8px);
  }
  .artboard-intro-panel.visible { display: flex; opacity: 1; }
  .artboard-intro-panel .panel-instruction {
    font-family: var(--mono); font-size: 10px; letter-spacing: 3px;
    text-transform: uppercase; color: var(--text); line-height: 1.8; margin-bottom: 12px;
  }
  .artboard-intro-panel .panel-description {
    font-family: var(--sans); font-size: 12px; font-weight: 300;
    color: var(--text-dim); line-height: 1.7; max-width: 560px;
  }
  .artboard-intro-panel .panel-close {
    font-family: var(--mono); font-size: 9px; letter-spacing: 3px;
    text-transform: uppercase; color: var(--text-muted);
    background: none; border: 1px solid var(--border-strong); padding: 8px 16px;
    cursor: pointer; transition: color 0.3s ease, border-color 0.3s ease;
    white-space: nowrap; flex-shrink: 0;
  }
  .artboard-intro-panel .panel-close:hover {
    color: var(--text);
    border-color: var(--text-dim);
  }

  /* ═══════════════════════════════════════
     ACT 1 PAGE
  ═══════════════════════════════════════ */
  #act1-page.visible {
    display: block;
  }
  .act1-back {
    display: none; /* replaced by page-nav */
  }

  /* ═══════════════════════════════════════
     ACT 2 PAGE
  ═══════════════════════════════════════ */
  #act2-page.visible {
    display: block;
  }

  /* ═══════════════════════════════════════
     ACT 3 PAGE
  ═══════════════════════════════════════ */
  #act3-page.visible {
    display: block;
  }

  #act4-page.visible {
    display: block;
  }

  #act5-page.visible {
    display: block;
  }

  #act6-page.visible {
    display: block;
  }

  #act7-page.visible {
    display: block;
  }

  /* Act 1 compact cards */
  .act1-card {
    display: grid;
    grid-template-columns: 200px 1fr;
    gap: 32px;
    align-items: start;
    padding: 40px 0;
    border-top: 1px solid var(--border);
  }
  .act1-card-img {
    width: 200px;
    height: auto;
    max-height: 260px;
    object-fit: contain;
    border: 1px solid var(--border);
    border-radius: 3px;
    filter: grayscale(40%) contrast(1.05);
    transition: filter 0.5s ease;
    background: var(--bg-surface);
  }
  .act1-card-img:hover { filter: grayscale(0%) contrast(1); }
  .act1-card-body h3 {
    font-family: var(--serif);
    font-size: clamp(18px, 2.5vw, 26px);
    font-weight: 400;
    color: var(--text);
    line-height: 1.3;
    margin-bottom: 12px;
  }
  .act1-card-body .section-label {
    margin-bottom: 8px;
  }
  .act1-card-body .prose {
    font-family: var(--sans);
    font-size: 15px;
    color: var(--text-dim);
    line-height: 1.8;
    font-weight: 300;
  }
  .act1-card-body .prose p { margin-bottom: 12px; }
  .act1-card-body .prose p:last-child { margin-bottom: 0; }
  @media (max-width: 600px) {
    .act1-card {
      grid-template-columns: 1fr;
      gap: 16px;
    }
    .act1-card-img {
      width: 100%;
      height: auto;
      max-height: 300px;
      object-fit: contain;
    }
  }

  /* ── Act 1 diverse layouts ── */

  /* 3-column portrait photo grid */
  .photo-trio {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 16px;
    padding: 40px 0;
    border-top: 1px solid var(--border);
  }
  .photo-trio-item {
    text-align: center;
    cursor: pointer;
  }
  .photo-trio-item img {
    width: 100%;
    aspect-ratio: 3 / 4;
    object-fit: cover;
    border: 1px solid var(--border);
    border-radius: 3px;
    filter: grayscale(40%) contrast(1.05);
    transition: filter 0.4s ease, border-color 0.3s ease, transform 0.3s ease;
  }
  .photo-trio-item:hover img {
    filter: grayscale(0%) contrast(1);
    border-color: var(--accent-dim);
    transform: translateY(-2px);
  }
  .photo-trio-item .photo-name {
    font-family: var(--serif);
    font-size: 16px;
    font-weight: 400;
    color: var(--text);
    margin-top: 12px;
  }
  .photo-trio-item .photo-detail {
    font-family: var(--mono);
    font-size: 9px;
    letter-spacing: 2px;
    text-transform: uppercase;
    color: var(--text-muted);
    margin-top: 4px;
  }
  @media (max-width: 600px) {
    .photo-trio { grid-template-columns: 1fr; gap: 24px; }
    .photo-trio-item img { aspect-ratio: 4 / 3; }
  }

  /* Expandable detail cards (for precursors) */
  .detail-cards {
    display: flex;
    flex-direction: column;
    gap: 8px;
    margin: 20px 0 40px;
  }
  .detail-cards.grid-2x2 {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
  }
  @media (max-width: 700px) {
    .detail-cards.grid-2x2 { grid-template-columns: 1fr; }
  }
  .detail-card {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 3px;
    overflow: hidden;
    transition: border-color 0.3s ease;
  }
  .detail-card:hover { border-color: var(--border-strong); }
  .detail-card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px 20px;
    cursor: pointer;
  }
  .detail-card-title {
    font-family: var(--serif);
    font-size: 17px;
    font-weight: 400;
    color: var(--text);
  }
  .detail-card-toggle {
    font-family: var(--mono);
    font-size: 16px;
    color: var(--accent);
    transition: transform 0.3s ease;
  }
  .detail-card.open .detail-card-toggle { transform: rotate(45deg); }
  .detail-card.open { border-color: var(--accent-dim); }
  .detail-card-content {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.4s ease;
    padding: 0 20px;
  }
  .detail-card.open .detail-card-content {
    max-height: 300px;
    padding: 0 20px 20px;
  }
  .detail-card-content .prose {
    font-size: 14px;
    line-height: 1.75;
  }

  /* Side-by-side document images (for forum posts / screenshots) */
  .doc-pair {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 24px;
    padding: 40px 0;
    border-top: 1px solid var(--border);
  }
  .doc-item {
    border: 1px solid var(--border);
    border-radius: 3px;
    overflow: hidden;
    background: var(--bg-card);
  }
  .doc-item img {
    width: 100%;
    display: block;
    filter: none; /* documents should be fully legible */
    transition: transform 0.3s ease;
  }
  .doc-item:hover img { transform: scale(1.02); }
  .doc-item-caption {
    padding: 12px 16px;
    border-top: 1px solid var(--border);
  }
  .doc-item-caption .doc-title {
    font-family: var(--serif);
    font-size: 15px;
    font-weight: 400;
    color: var(--text);
    margin-bottom: 4px;
  }
  .doc-item-caption .doc-desc {
    font-family: var(--mono);
    font-size: 9px;
    letter-spacing: 1px;
    text-transform: uppercase;
    color: var(--text-muted);
  }
  .read-more-btn {
    display: inline-block;
    margin-top: 10px;
    font-family: var(--mono);
    font-size: 10px;
    letter-spacing: 1.5px;
    text-transform: uppercase;
    color: var(--accent);
    background: none;
    border: 1px solid var(--accent-dim);
    padding: 6px 14px;
    cursor: pointer;
    border-radius: 2px;
    transition: all 0.3s ease;
  }
  .read-more-btn:hover {
    background: var(--accent);
    color: var(--bg);
  }
  .expand-content {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.5s ease, padding 0.5s ease;
    padding: 0 16px;
  }
  .doc-item.expanded .expand-content {
    max-height: 400px;
    padding: 0 16px 20px;
  }
  .doc-item.expanded .read-more-btn {
    border-color: var(--accent);
  }
  @media (max-width: 700px) {
    .doc-pair { grid-template-columns: 1fr; }
  }

  /* Wide landscape image (full container width) */
  .wide-image {
    width: 100%;
    padding: 40px 0;
    border-top: 1px solid var(--border);
  }
  .wide-image img {
    width: 100%;
    display: block;
    border-radius: 3px;
    border: 1px solid var(--border);
  }
  .wide-image .img-caption {
    font-family: var(--mono);
    font-size: 9px;
    letter-spacing: 2px;
    text-transform: uppercase;
    color: var(--text-muted);
    text-align: center;
    padding: 12px 0 0;
  }

  /* ── Act 1 visual timeline patchwork ── */
  .act1-timeline {
    position: relative;
    width: 100%;
    padding: 60px 0 40px;
    border-top: 1px solid var(--border);
    overflow: hidden;
  }
  .act1-timeline-track {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: space-between;
    width: 100%;
    min-height: 220px;
  }
  .act1-timeline-line {
    position: absolute;
    top: 50%;
    left: 0;
    right: 0;
    height: 2px;
    background: linear-gradient(90deg, var(--accent-dim), var(--accent), var(--accent-dim));
    transform: translateY(-50%);
    z-index: 1;
  }
  .act1-timeline-arrow {
    position: absolute;
    top: 50%;
    right: -2px;
    transform: translateY(-50%);
    width: 0; height: 0;
    border-top: 8px solid transparent;
    border-bottom: 8px solid transparent;
    border-left: 14px solid var(--accent);
    z-index: 2;
  }
  .tl-node {
    position: relative;
    z-index: 3;
    display: flex;
    flex-direction: column;
    align-items: center;
    flex: 1;
    max-width: 140px;
  }
  .tl-node-img {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    object-fit: cover;
    border: 2px solid var(--accent-dim);
    filter: grayscale(50%) contrast(1.1);
    transition: all 0.4s ease;
    background: var(--bg-card);
    box-shadow: 0 0 0 4px var(--bg), 0 4px 20px rgba(0,0,0,0.4);
  }
  .tl-node:hover .tl-node-img {
    filter: grayscale(0%) contrast(1.05);
    border-color: var(--accent);
    transform: scale(1.08);
  }
  .tl-node-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: var(--accent);
    margin: 10px 0;
    box-shadow: 0 0 0 3px var(--bg), 0 0 0 5px var(--accent-dim);
  }
  .tl-node-year {
    font-family: var(--mono);
    font-size: 11px;
    letter-spacing: 2px;
    color: var(--accent);
    font-weight: 700;
  }
  .tl-node-label {
    font-family: var(--mono);
    font-size: 8px;
    letter-spacing: 1.5px;
    text-transform: uppercase;
    color: var(--text-muted);
    text-align: center;
    margin-top: 4px;
    max-width: 120px;
    line-height: 1.4;
  }
  /* Alternate nodes above/below the line */
  .tl-node.above .tl-node-img { order: 1; }
  .tl-node.above .tl-node-dot { order: 2; }
  .tl-node.above .tl-node-year { order: 3; }
  .tl-node.above .tl-node-label { order: 4; }

  .tl-node.below {
    flex-direction: column-reverse;
  }
  .tl-node.below .tl-node-img { order: 4; }
  .tl-node.below .tl-node-dot { order: 3; }
  .tl-node.below .tl-node-year { order: 2; }
  .tl-node.below .tl-node-label { order: 1; }

  .act1-timeline-caption {
    font-family: var(--mono);
    font-size: 9px;
    letter-spacing: 2px;
    text-transform: uppercase;
    color: var(--text-muted);
    text-align: center;
    padding: 24px 0 0;
  }

  @media (max-width: 700px) {
    .tl-node-img { width: 64px; height: 64px; }
    .tl-node { max-width: 90px; }
    .tl-node-label { font-size: 7px; }
    .tl-node-year { font-size: 9px; }
    .act1-timeline-track { min-height: 160px; }
  }
  @media (max-width: 480px) {
    .tl-node-img { width: 48px; height: 48px; }
    .tl-node { max-width: 65px; }
    .tl-node-label { display: none; }
  }

  /* Act 1 video embed (landscape, wider than intro vertical reels) */
  .act1-video-embed {
    position: relative;
    width: 100%;
    max-width: 500px;
    aspect-ratio: 9 / 16;
    margin: 0;
    border: 1px solid var(--border);
    border-radius: 3px;
    overflow: hidden;
    background: var(--bg);
  }
  .act1-video-embed video {
    width: 100%; height: 100%;
    object-fit: cover;
    display: block;
  }

  .timeline-container {
    width: 100%;
    margin: 0;
    padding: 0;
    padding-top: 52px; /* account for fixed nav */
  }
  .timeline-container iframe {
    width: 100%;
    height: 650px;
    border: none;
    border-radius: 0;
    box-shadow: none;
    background: #fff;
    display: block;
  }
  /* In dark mode, add a subtle border below the white timeline */
  body:not(.light-mode) .timeline-container {
    border-bottom: 1px solid var(--border-strong);
  }

  /* ═══════════════════════════════════════
     INTRODUCTION PAGE
  ═══════════════════════════════════════ */
  #intro-page.visible {
    display: block;
  }

  /* Page navigation header, shared between intro & act1 */
  .page-nav {
    position: fixed; top: 0; left: 0; right: 0; z-index: 600;
    height: 52px;
    display: flex; justify-content: space-between; align-items: center;
    padding: 0 24px;
    background: var(--overlay-bg);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border-bottom: 1px solid var(--border);
    transition: transform 0.3s ease;
  }
  .page-nav-left, .page-nav-right {
    display: flex; align-items: center; gap: 8px;
  }
  .page-nav-btn {
    font-family: var(--mono); font-size: 10px; letter-spacing: 2px;
    text-transform: uppercase; color: var(--text-dim);
    background: none; border: 1px solid transparent;
    padding: 8px 16px; cursor: pointer;
    transition: all 0.3s ease; text-decoration: none;
    border-radius: 2px;
  }
  .page-nav-btn:hover { color: var(--text); border-color: var(--border-strong); }
  .page-nav-btn.primary {
    color: var(--accent); border-color: var(--accent-dim);
  }
  .page-nav-btn.primary:hover {
    background: var(--accent); color: var(--bg); border-color: var(--accent);
  }
  .page-nav-logo {
    font-family: var(--serif); font-size: 13px; font-weight: 700;
    letter-spacing: 2px; text-transform: uppercase; color: var(--text);
    text-decoration: none; cursor: pointer;
  }
  @media (max-width: 600px) {
    .page-nav { padding: 0 12px; }
    .page-nav-btn { font-size: 8px; padding: 6px 10px; letter-spacing: 1px; }
    .page-nav-logo { font-size: 10px; letter-spacing: 2px; }
  }

  .intro-back {
    display: none; /* replaced by page-nav */
  }

  .beat-section {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 120px 40px;
    position: relative;
    max-width: 1200px;
    margin: 0 auto;
  }

  .beat-title {
    font-family: var(--serif);
    font-size: clamp(32px, 5vw, 72px);
    font-weight: 400;
    text-align: center;
    color: var(--text);
    margin-bottom: 80px;
    letter-spacing: 0.01em;
    max-width: 900px;
    line-height: 1.3;
  }

  .beat-divider {
    width: 100%;
    height: 1px;
    background: linear-gradient(90deg, transparent 0%, var(--accent-dim) 50%, transparent 100%);
    margin: 120px 0;
    opacity: 0;
    animation: fadeInLine 0.8s ease forwards;
  }

  @keyframes fadeInLine { to { opacity: 1; } }

  /* Video Placeholder */
  .video-placeholder {
    position: relative;
    width: 100%;
    max-width: 500px;
    aspect-ratio: 9 / 16;
    background: var(--bg-surface);
    border: 1px solid var(--border);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 16px;
    margin: 60px auto;
    cursor: pointer;
    transition: border-color 0.3s ease;
  }

  .video-placeholder:hover {
    border-color: var(--accent-dim);
  }

  .play-button {
    width: 60px;
    height: 60px;
    border: 2px solid var(--accent);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
  }

  .play-button::after {
    content: '';
    width: 0;
    height: 0;
    border-left: 12px solid var(--accent);
    border-top: 8px solid transparent;
    border-bottom: 8px solid transparent;
    margin-left: 3px;
  }

  .video-label {
    font-family: var(--mono);
    font-size: 10px;
    letter-spacing: 2px;
    text-transform: uppercase;
    color: var(--text-dim);
    text-align: center;
  }

  /* Embedded video player */
  .video-embed {
    position: relative;
    width: 100%;
    max-width: 400px;
    aspect-ratio: 9 / 16;
    margin: 60px auto;
    border: none;
    overflow: hidden;
    background: var(--bg);
  }
  .video-embed video {
    width: 100%; height: 100%;
    object-fit: cover;
    display: block;
  }
  .video-play-overlay {
    position: absolute; inset: 0;
    display: flex; align-items: center; justify-content: center;
    background: rgba(0,0,0,0.3);
    cursor: pointer;
    transition: background 0.3s ease, opacity 0.3s ease;
  }
  .video-play-overlay:hover {
    background: rgba(0,0,0,0.15);
  }
  .video-play-overlay.hidden {
    opacity: 0; pointer-events: none;
  }
  .video-caption {
    position: absolute; bottom: 0; left: 0; right: 0;
    padding: 16px;
    background: linear-gradient(transparent, rgba(0,0,0,0.8));
    font-family: var(--mono); font-size: 9px;
    letter-spacing: 2px; text-transform: uppercase;
    color: var(--text-dim); text-align: center;
    pointer-events: none;
  }

  /* ═══════════════════════════════════════
     EDITORIAL LAYOUT
  ═══════════════════════════════════════ */
  .intro-container {
    max-width: 1100px; margin: 0 auto; padding: 0 40px;
  }

  /* Hero: video left, text right */
  .intro-hero {
    display: grid;
    grid-template-columns: 340px 1fr;
    gap: 60px;
    align-items: start;
    padding: 120px 0 80px; /* extra top padding for fixed nav */
  }
  .intro-hero .video-embed {
    margin: 0; max-width: none; width: 100%;
    position: sticky; top: 100px;
  }
  .intro-hero-text {
    padding-top: 20px;
  }
  .intro-hero-text h1 {
    font-family: var(--serif); font-size: clamp(28px, 4vw, 44px);
    font-weight: 400; color: var(--text); line-height: 1.3;
    margin-bottom: 32px; letter-spacing: 0.01em;
  }
  .intro-hero-text .subtitle {
    font-family: var(--serif); font-size: 18px; font-style: italic; font-weight: 400;
    color: var(--accent); margin-bottom: 40px; line-height: 1.5;
  }

  /* Section label */
  .section-label {
    font-family: var(--mono); font-size: 9px; letter-spacing: 3px;
    text-transform: uppercase; color: var(--accent-dim);
    margin-bottom: 16px;
  }

  /* Prose paragraphs */
  .prose {
    font-family: var(--sans); font-size: 16px; line-height: 1.85;
    color: var(--text-dim); font-weight: 300;
  }
  .prose p { margin-bottom: 20px; }
  .prose strong { color: var(--text); font-weight: 500; }
  .prose em { color: var(--accent); font-style: italic; }

  /* Two-column: image + text */
  .editorial-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 60px;
    align-items: center;
    padding: 80px 0;
    border-top: 1px solid var(--border);
  }
  .editorial-row.reverse { direction: rtl; }
  .editorial-row.reverse > * { direction: ltr; }

  .editorial-image {
    position: relative; overflow: hidden;
    border: none;
    border-radius: 3px;
  }
  .editorial-image.no-frame {
    border: none;
    border-radius: 0;
    background: none;
  }
  .editorial-image img {
    width: 100%; display: block;
    filter: grayscale(60%) contrast(1.1);
    transition: filter 0.5s ease;
  }
  .editorial-image:hover img {
    filter: grayscale(0%) contrast(1.05);
  }
  .editorial-image .img-caption {
    font-family: var(--mono); font-size: 9px; letter-spacing: 2px;
    text-transform: uppercase; color: var(--text-muted);
    padding: 12px 0 0; text-align: center;
  }

  .editorial-text h2 {
    font-family: var(--serif); font-size: clamp(22px, 3vw, 36px);
    font-weight: 400; color: var(--text); line-height: 1.3;
    margin-bottom: 24px;
  }

  /* Full-width text section */
  .editorial-full {
    padding: 80px 0;
    border-top: 1px solid var(--border);
    max-width: 720px;
    margin: 0 auto;
  }

  /* Statement / pull quote */
  .statement {
    font-family: var(--serif); font-size: clamp(20px, 3vw, 32px);
    font-weight: 400; color: var(--text); line-height: 1.5;
    text-align: center; padding: 80px 40px;
    border-top: 1px solid var(--border);
    border-bottom: 1px solid var(--border);
    margin: 0 auto; max-width: 800px;
  }

  /* Section navigation hint */
  .section-next {
    display: flex; align-items: center; gap: 12px;
    margin-top: 40px; cursor: pointer;
    font-family: var(--mono); font-size: 9px; letter-spacing: 2px;
    text-transform: uppercase; color: var(--accent-dim);
    transition: color 0.3s ease;
  }
  .section-next:hover { color: var(--accent); }
  .section-next::after { content: '→'; }

  /* Responsive */
  @media (max-width: 900px) {
    .intro-hero { grid-template-columns: 1fr; gap: 40px; padding-top: 80px; }
    .intro-hero .video-embed { max-width: 300px; margin: 0 auto; position: static; }
    .editorial-row { grid-template-columns: 1fr; gap: 32px; }
    .editorial-row.reverse { direction: ltr; }
    .intro-container { padding: 0 20px; }
  }
  @media (max-width: 480px) {
    .beat-section { padding: 60px 16px; }
    .editorial-full { padding: 40px 0; }
    .statement { padding: 40px 16px; font-size: clamp(16px, 4vw, 24px); }
    .gate-section { padding: 60px 16px; }
    .landing-cta-btn { padding: 14px 32px; font-size: 10px; }
  }

  /* Expandable Cards */
  .cards-container {
    width: 100%;
    max-width: 800px;
    margin: 60px auto;
    display: flex;
    flex-direction: column;
    gap: 12px;
  }

  .expand-card {
    background: var(--bg-card);
    border: 1px solid var(--border);
    padding: 24px;
    cursor: pointer;
    transition: all 0.3s ease;
    border-radius: 0;
  }

  .expand-card:hover {
    border-color: var(--accent-dim);
    box-shadow: 0 0 20px rgba(201, 169, 110, 0.08);
  }

  .expand-card.active {
    border-color: var(--accent);
    box-shadow: 0 0 30px rgba(201, 169, 110, 0.12);
  }

  .card-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: 16px;
  }

  .card-title {
    font-family: var(--serif);
    font-size: 18px;
    font-weight: 700;
    color: var(--text);
    flex: 1;
  }

  .card-toggle {
    font-family: var(--mono);
    font-size: 18px;
    color: var(--accent);
    flex-shrink: 0;
    transition: transform 0.3s ease;
  }

  .expand-card.active .card-toggle {
    transform: rotate(45deg);
  }

  .card-content {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease, padding 0.3s ease;
    font-family: var(--sans);
    font-size: 16px;
    color: var(--text-dim);
    line-height: 1.8;
    font-weight: 300;
  }

  .expand-card.active .card-content {
    max-height: 500px;
    padding-top: 20px;
  }

  /* Monty Hall Game */
  .game-container {
    width: 100%;
    max-width: 900px;
    margin: 80px auto;
    padding: 60px 0;
  }

  .monty-instruction {
    font-family: var(--serif);
    font-size: 24px;
    font-weight: 400;
    text-align: center;
    color: var(--text);
    margin-bottom: 16px;
  }

  .monty-subtext {
    font-family: var(--sans);
    font-size: 14px;
    text-align: center;
    color: var(--text-dim);
    margin-bottom: 40px;
  }

  #doorsContainer {
    display: flex;
    justify-content: center;
    gap: 24px;
    margin-bottom: 40px;
  }

  .monty-door {
    width: clamp(120px, 22vw, 200px);
    height: clamp(180px, 33vw, 300px);
    perspective: 800px;
    cursor: pointer;
    position: relative;
  }

  .monty-door.disabled { pointer-events: none; }

  .door-inner {
    width: 100%;
    height: 100%;
    position: relative;
    transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
    transform-style: preserve-3d;
  }

  .monty-door.opened .door-inner {
    transform: rotateY(-120deg);
  }

  .door-front, .door-back {
    position: absolute;
    inset: 0;
    backface-visibility: hidden;
    border: 1px solid var(--border);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
  }

  .door-front {
    background: linear-gradient(180deg, var(--border) 0%, var(--bg-card) 50%, var(--bg-surface) 100%);
    transition: border-color 0.3s ease, box-shadow 0.3s ease;
  }

  .monty-door:hover .door-front {
    border-color: var(--accent-dim);
    box-shadow: 0 0 30px rgba(201,169,110,0.08);
  }

  .monty-door.selected .door-front {
    border-color: var(--accent);
    box-shadow: 0 0 40px rgba(201,169,110,0.15);
  }

  .door-number {
    font-family: var(--serif);
    font-size: clamp(36px, 6vw, 56px);
    font-weight: 400;
    color: var(--text-dim);
    transition: color 0.3s ease;
  }

  .monty-door:hover .door-number { color: var(--text); }
  .monty-door.selected .door-number { color: var(--accent); }

  .door-handle {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    border: 1px solid var(--text-muted);
    position: absolute;
    right: 16px;
    top: 50%;
    transform: translateY(-50%);
  }

  .door-back {
    background: var(--bg);
    transform: rotateY(180deg);
    border-color: var(--border);
  }

  .door-prize {
    font-size: clamp(32px, 5vw, 48px);
  }

  .monty-door.revealed-empty .door-front {
    border-color: var(--border);
    opacity: 0.4;
  }

  .monty-door.revealed-empty .door-number {
    color: var(--text-muted);
    text-decoration: line-through;
  }

  .monty-buttons {
    display: none;
    gap: 24px;
    justify-content: center;
    margin-top: 40px;
  }

  .monty-btn {
    font-family: var(--mono);
    font-size: 11px;
    letter-spacing: 2px;
    text-transform: uppercase;
    padding: 14px 32px;
    background: transparent;
    border: 1px solid var(--accent-dim);
    color: var(--accent-dim);
    cursor: pointer;
    transition: all 0.3s ease;
  }

  .monty-btn:hover {
    background: var(--accent-dim);
    color: var(--bg);
  }

  .monty-result {
    display: none;
    text-align: center;
    margin-top: 40px;
    padding: 32px;
    background: var(--bg-card);
    border: 1px solid var(--border);
  }

  .result-text {
    font-family: var(--serif);
    font-size: 20px;
    margin-bottom: 16px;
    font-weight: 400;
  }

  .result-explain {
    font-family: var(--sans);
    font-size: 14px;
    color: var(--text-dim);
    line-height: 1.8;
    margin-bottom: 24px;
  }

  .monty-stats {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 16px;
    margin-top: 24px;
    padding-top: 24px;
    border-top: 1px solid var(--border);
  }

  .stat-box {
    text-align: center;
  }

  .stat-number {
    font-family: var(--mono);
    font-size: 24px;
    color: var(--accent);
    display: block;
  }

  .stat-label {
    font-family: var(--mono);
    font-size: 9px;
    letter-spacing: 2px;
    text-transform: uppercase;
    color: var(--text-muted);
    margin-top: 4px;
  }

  .play-again-btn {
    font-family: var(--mono);
    font-size: 10px;
    letter-spacing: 2px;
    text-transform: uppercase;
    padding: 12px 28px;
    background: var(--accent-dim);
    border: none;
    color: var(--bg);
    cursor: pointer;
    margin-top: 16px;
    transition: background 0.3s ease;
  }

  .play-again-btn:hover {
    background: var(--accent);
  }

  /* Email Gate */
  .gate-section {
    min-height: 80vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 80px 40px;
    position: relative;
    overflow: hidden;
    max-width: 900px;
    margin: 0 auto;
  }

  .gate-section::before {
    content: '';
    position: absolute;
    inset: 0;
    background: radial-gradient(ellipse at center, rgba(201,169,110,0.03) 0%, transparent 70%);
    pointer-events: none;
  }

  .gate-door-icon {
    width: 60px;
    height: 80px;
    border: 1px solid var(--text-muted);
    border-radius: 2px 2px 0 0;
    position: relative;
    margin-bottom: 40px;
  }

  .gate-door-icon::after {
    content: '';
    position: absolute;
    right: 10px;
    top: 50%;
    width: 6px;
    height: 6px;
    border-radius: 50%;
    border: 1px solid var(--accent-dim);
  }

  .gate-title {
    font-family: var(--serif);
    font-size: clamp(20px, 3vw, 32px);
    font-weight: 400;
    color: var(--text);
    text-align: center;
    margin-bottom: 12px;
  }

  .gate-subtitle {
    font-family: var(--sans);
    font-size: 14px;
    color: var(--text-dim);
    text-align: center;
    margin-bottom: 40px;
    font-weight: 300;
  }

  /* Countdown clock blocks */
  .countdown-clock {
    display: flex;
    gap: clamp(12px, 3vw, 24px);
    justify-content: center;
    margin: 32px 0;
  }
  .countdown-block {
    display: flex;
    flex-direction: column;
    align-items: center;
    min-width: clamp(60px, 12vw, 90px);
  }
  .countdown-block .cd-number {
    font-family: var(--mono);
    font-size: clamp(32px, 6vw, 56px);
    font-weight: 300;
    color: var(--accent);
    line-height: 1;
    letter-spacing: 2px;
    border: 1px solid var(--border-strong);
    border-radius: 4px;
    padding: clamp(12px, 2vw, 20px) clamp(14px, 2.5vw, 24px);
    background: var(--bg-card);
    min-width: clamp(60px, 12vw, 90px);
    text-align: center;
    position: relative;
    overflow: hidden;
  }
  .countdown-block .cd-number::after {
    content: '';
    position: absolute;
    left: 0; right: 0;
    top: 50%;
    height: 1px;
    background: var(--border);
    opacity: 0.4;
  }
  .countdown-block .cd-label {
    font-family: var(--mono);
    font-size: 9px;
    letter-spacing: 3px;
    text-transform: uppercase;
    color: var(--text-muted);
    margin-top: 10px;
  }
  .countdown-divider {
    font-family: var(--mono);
    font-size: clamp(24px, 4vw, 40px);
    color: var(--accent-dim);
    align-self: flex-start;
    padding-top: clamp(14px, 2.5vw, 24px);
    opacity: 0.5;
  }
  .countdown-released .cd-number {
    border-color: var(--accent);
    color: var(--accent);
  }

  .gate-form {
    display: flex;
    gap: 0;
    max-width: 420px;
    width: 100%;
  }

  .gate-form input[type="email"] {
    flex: 1;
    background: transparent;
    border: 1px solid var(--border-strong);
    border-right: none;
    padding: 14px 20px;
    font-family: var(--mono);
    font-size: 12px;
    color: var(--text);
    outline: none;
    letter-spacing: 1px;
    transition: border-color 0.3s ease;
  }

  .gate-form input[type="email"]::placeholder {
    color: var(--text-muted);
  }

  .gate-form input[type="email"]:focus {
    border-color: var(--accent-dim);
  }

  .gate-form button {
    background: var(--accent-dim);
    border: 1px solid var(--accent-dim);
    padding: 14px 24px;
    font-family: var(--mono);
    font-size: 10px;
    letter-spacing: 3px;
    text-transform: uppercase;
    color: var(--bg);
    cursor: pointer;
    transition: background 0.3s ease;
  }

  .gate-form button:hover {
    background: var(--accent);
  }

  .gate-footer {
    font-family: var(--mono);
    font-size: 9px;
    color: var(--text-muted);
    margin-top: 24px;
    letter-spacing: 2px;
  }

  /* Site Footer */
  .site-footer {
    padding: 60px 40px;
    text-align: center;
    border-top: 1px solid var(--border);
  }

  .footer-title {
    font-family: var(--serif);
    font-size: 14px;
    color: var(--text-muted);
    letter-spacing: 2px;
    text-transform: uppercase;
  }

  .footer-sub {
    font-family: var(--mono);
    font-size: 9px;
    color: var(--text-muted);
    margin-top: 12px;
    letter-spacing: 2px;
  }

  /* 100-DOOR GAME STYLES */
  .door-100 {
    width: 40px;
    height: 40px;
    border: 1px solid var(--border-strong);
    background: linear-gradient(180deg, var(--border) 0%, var(--bg-card) 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    font-family: var(--mono);
    font-size: 9px;
    color: var(--text-muted);
    transition: all 0.2s ease;
    border-radius: 2px;
    position: relative;
    overflow: hidden;
  }

  .door-100:hover {
    border-color: var(--accent-dim);
    color: var(--text);
  }

  .door-100.chosen-100 {
    border-color: var(--accent);
    box-shadow: 0 0 15px rgba(201,169,110,0.3);
    color: var(--accent);
  }

  .door-100.eliminated {
    opacity: 0.15;
    border-color: var(--border);
    color: var(--text-muted);
    cursor: not-allowed;
  }

  .door-100.revealed-prize {
    border-color: #4ade80;
    background: rgba(74,222,128,0.1);
    box-shadow: 0 0 20px rgba(74,222,128,0.4);
    color: #4ade80;
  }

  .door-100.eliminated-anim {
    animation: doorEliminate 0.6s ease forwards;
  }

  @keyframes doorEliminate {
    0% { opacity: 1; transform: scale(1); border-color: var(--border-strong); }
    50% { border-color: #ff4444; }
    100% { opacity: 0.1; transform: scale(0.9); border-color: var(--border); }
  }

  /* Scrollbar */
  ::-webkit-scrollbar { width: 4px; }
  ::-webkit-scrollbar-track { background: var(--bg); }
  ::-webkit-scrollbar-thumb { background: var(--border-dim); border-radius: 2px; }
  ::-webkit-scrollbar-thumb:hover { background: var(--border-strong); }

  /* Responsive */
  @media (max-width: 768px) {
    .artboard-header { padding: 0 16px; height: 48px; }
    .artboard-nav { gap: 4px; }
    .artboard-nav a { font-size: 8px; padding: 6px 10px; letter-spacing: 1px; }
    .artboard-logo { font-size: 11px; letter-spacing: 4px; }
    .artboard-intro-panel { left: 16px; right: 16px; bottom: 16px; flex-direction: column; gap: 16px; }
    .scrollbar-track.horizontal { right: 16px; }
    .scrollbar-track.vertical { right: 16px; }
    .beat-section { padding: 80px 20px; }
    #doorsContainer { flex-direction: column; align-items: center; }
    #doorsGrid { grid-template-columns: repeat(5, 1fr) !important; }
    .timeline-container iframe { height: 450px; }
  }
</style>

</head>
<body>

<div id="loader" onclick="skipLoader()">
  <div id="flashSequence">
    <!-- Images will be added here dynamically -->
  </div>
  <div class="loader-progress" id="loaderProgress">
    <div class="loader-progress-fill" id="loaderProgressFill"></div>
  </div>
  <div id="loaderPercent" style="font-family: var(--mono); font-size: 11px; letter-spacing: 3px; color: var(--text-muted); margin-top: 12px; text-align: center; width: 160px; transition: opacity 0.3s ease;">0%</div>
  <!-- Overlay removed: title now lives solely in landing-hero for seamless transition -->
</div>

<div id="landing-scroll-container">

  <!-- HERO: Title section (first viewport) -->
  <div class="landing-hero">
    <div class="loader-number">001 / 007</div>
    <div class="loader-title">The Byzantine General</div>
    <div class="loader-subtitle">The true story behind the invention of Bitcoin</div>
    <div class="landing-scroll-hint">Scroll to explore</div>
    <div class="landing-scroll-arrow"></div>
  </div>

  <!-- TILES: Sticky viewport -->
  <div class="landing-tiles-spacer" id="tilesSpacer">
    <div class="landing-tiles-viewport" id="tilesViewport">
      <div id="artboard-section">
        <div class="artboard-header" id="landingHeader" style="opacity:0; transition: opacity 0.5s;">
          <div class="artboard-logo">The Byzantine General</div>
          <nav class="artboard-nav">
            <a class="nav-primary" onclick="openIntro()">Introduction</a>
            <a onclick="openIntro()">Chapters</a>
            <a onclick="openIntro()">The Research</a>
            <a href="javascript:void(0)">Newsletter</a>
          </nav>
        </div>

        <div class="artboard-canvas-container">
          <div class="artboard-canvas" id="artboardCanvas">
      <!-- Column 1, parallax speed: 1.0 (base) -->
      <div class="mosaic-column" data-parallax="1.0">
        <div class="mosaic-tile" style="height:420px">
          <img loading="lazy" src="https://i.postimg.cc/50yThcsy/byz-pic.png" alt="Satoshi Mask">
        </div>
        <div class="mosaic-tile" style="height:340px">
          <img loading="lazy" src="https://i.postimg.cc/MTZzCVHF/ross-ulbricht-silk-road-nick-bilton-copy.png" alt="Ross Ulbricht">
        </div>
        <div class="mosaic-tile" style="height:380px">
          <img loading="lazy" src="https://i.postimg.cc/kXcF6qzR/Myth.png" alt="Satoshi Myth">
        </div>
        <div class="mosaic-tile" style="height:360px">
          <img loading="lazy" src="https://i.postimg.cc/qvrWZBTH/9-C1-E5-F58-C488-424-E-8-FC5-44-AE8-B4-D9-CC3.jpg" alt="Evidence">
        </div>
        <div class="mosaic-tile" style="height:400px">
          <img loading="lazy" src="https://i.postimg.cc/wjPsX7ss/115-D950-D-916-C-477-F-ABF9-78-A41-E41-F5-AD-1-105-c.jpg" alt="Investigation">
        </div>
      </div>

      <!-- Column 2, parallax speed: 0.6 (slower) -->
      <div class="mosaic-column" data-parallax="0.6">
        <div class="mosaic-tile" style="height:380px">
          <img loading="lazy" src="https://i.postimg.cc/W3c5zwgw/newswekk.jpg" alt="Newsweek Satoshi">
        </div>
        <div class="mosaic-tile" style="height:440px">
          <img loading="lazy" src="https://i.postimg.cc/zfnK8Wpp/Silk-road-thumbnail.png" alt="Silk Road">
        </div>
        <div class="mosaic-tile" style="height:320px">
          <img loading="lazy" src="https://i.postimg.cc/PqJH2fWr/Craig-BBC.jpg" alt="Craig Wright BBC">
        </div>
        <div class="mosaic-tile" style="height:360px">
          <img loading="lazy" src="https://i.postimg.cc/BngbZgHz/Bitcoin-Genesis-block.jpg" alt="Bitcoin Genesis Block">
        </div>
      </div>

      <!-- Column 3, parallax speed: 1.3 (faster) -->
      <div class="mosaic-column" data-parallax="1.3">
        <div class="mosaic-tile" style="height:380px">
          <img loading="lazy" src="https://i.postimg.cc/kGrcfT6K/cypherpunk-style.jpg" alt="Cypherpunks">
        </div>
        <div class="mosaic-tile" style="height:440px">
          <img loading="lazy" src="https://i.postimg.cc/9FyQ7fp6/Satoshi-Nakamoto-surround-016.jpg" alt="Satoshi">
        </div>
        <div class="mosaic-tile" style="height:300px">
          <img loading="lazy" src="https://i.postimg.cc/BbJdMx71/FBI.png" alt="FBI">
        </div>
        <div class="mosaic-tile" style="height:380px">
          <img loading="lazy" src="https://i.postimg.cc/4dL7p95L/47-DCA4-E0-19-FD-4-F53-AB28-6-ABC2-A822067.jpg" alt="Context">
        </div>
        <div class="mosaic-tile" style="height:340px">
          <img loading="lazy" src="https://i.postimg.cc/GhgRJ9H0/A9410-D9-C-70-FB-4897-96-AE-159682-DAD6-D7.jpg" alt="Research">
        </div>
      </div>

      <!-- Column 4, parallax speed: 0.8 -->
      <div class="mosaic-column" data-parallax="0.8">
        <div class="mosaic-tile" style="height:350px">
          <img loading="lazy" src="https://i.postimg.cc/L4LF2SHh/assange-clear.png" alt="Assange">
        </div>
        <div class="mosaic-tile" style="height:400px">
          <img loading="lazy" src="https://i.postimg.cc/50yThcsy/byz-pic.png" alt="Satoshi Mask">
        </div>
        <div class="mosaic-tile" style="height:320px">
          <img loading="lazy" src="https://i.postimg.cc/MT5BjSCw/mount-gox.jpg" alt="Mount Gox">
        </div>
        <div class="mosaic-tile" style="height:380px">
          <img loading="lazy" src="https://i.postimg.cc/kXcF6qzR/Myth.png" alt="Myth">
        </div>
        <div class="mosaic-tile" style="height:360px">
          <img loading="lazy" src="https://i.postimg.cc/MTZzCVHF/ross-ulbricht-silk-road-nick-bilton-copy.png" alt="Ross Ulbricht">
        </div>
      </div>

      <!-- Column 5, parallax speed: 1.1 -->
      <div class="mosaic-column" data-parallax="1.1">
        <div class="mosaic-tile" style="height:440px">
          <img loading="lazy" src="https://i.postimg.cc/kGrcfT6K/cypherpunk-style.jpg" alt="Cypherpunks">
        </div>
        <div class="mosaic-tile" style="height:340px">
          <img loading="lazy" src="https://i.postimg.cc/L4LF2SHh/assange-clear.png" alt="Assange">
        </div>
        <div class="mosaic-tile" style="height:380px">
          <img loading="lazy" src="https://i.postimg.cc/9FyQ7fp6/Satoshi-Nakamoto-surround-016.jpg" alt="Satoshi">
        </div>
        <div class="mosaic-tile" style="height:300px">
          <img loading="lazy" src="https://i.postimg.cc/PqJH2fWr/Craig-BBC.jpg" alt="Craig Wright">
        </div>
      </div>
    </div>
  </div>

  <div class="scrollbar-track horizontal" id="hScrollTrack">
    <div class="scrollbar-thumb" id="hScrollThumb"></div>
  </div>
  <div class="scrollbar-track vertical" id="vScrollTrack">
    <div class="scrollbar-thumb" id="vScrollThumb"></div>
  </div>

  <div class="artboard-intro-panel" id="artboardIntro">
    <div>
      <div class="panel-instruction">SCROLL / DRAG TO EXPLORE THE ARTBOARD</div>
      <div class="panel-description">Use the navigation above to dive into the investigation. The Byzantine General is a seven-year examination into Satoshi Nakamoto's true identity.</div>
    </div>
    <button class="panel-close" onclick="closeIntroPanel()">CLOSE</button>
  </div>
      </div><!-- /artboard-section -->
    </div><!-- /landing-tiles-viewport -->
  </div><!-- /landing-tiles-spacer -->

  <!-- CTA: Access Research section -->
  <div class="landing-cta-section" id="landingCta">
    <h2>Begin the Investigation</h2>
    <p style="font-family: var(--mono); font-size: 14px; color: var(--text-muted); letter-spacing: 2px; margin-bottom: 24px;">73262a56ce07170bd36f6769eb7708</p>
    <a class="landing-cta-btn" href="javascript:void(0)" onclick="openIntro()">Access the Research</a>
  </div>

</div><!-- /landing-scroll-container -->


<div id="intro-page">
  <!-- Navigation Header -->
  <nav class="page-nav" id="introNav">
    <div class="page-nav-left">
      <button class="page-nav-btn" onclick="backToArtboard()">← Home</button>
    </div>
    <span class="page-nav-logo" onclick="backToArtboard()">The Byzantine General</span>
    <div class="page-nav-right">
      <button class="page-nav-btn primary" onclick="window.location.href='act1.html'">Act 1 →</button>
    </div>
  </nav>

  <div class="intro-container">

    <!-- ══════ HERO: Video + Opening Text ══════ -->
    <div class="intro-hero">
      <div class="video-embed">
        <video id="introVideo" playsinline preload="metadata" poster="thumb-intro-1.jpg">
          <source src="reel-intro-1-1.mp4" type="video/mp4">
        </video>
        <div class="video-play-overlay" id="videoPlayOverlay" onclick="toggleIntroVideo()">
          <div class="play-button"></div>
        </div>
        <div class="video-caption">The Satoshi Mystery</div>
      </div>

      <div class="intro-hero-text">
        <div class="section-label">Introduction</div>
        <h1>Deconstructing the Myth of Satoshi Nakamoto</h1>
        <div class="subtitle">The true story behind the invention of Bitcoin</div>
        <div class="prose">
          <p>Bitcoin is one of the most disruptive technologies of our time. Seventeen years after its creation, the world's first decentralized currency has fueled an economy worth trillions of dollars and challenged the very foundation of monetary authority.</p>
          <p>But Bitcoin's impact runs deeper than economics. Like artificial intelligence, it marks the beginning of a new epoch, one that could reshape society as profoundly as the Industrial Revolution once did.</p>
          <p>Since the approval of Bitcoin ETFs in the United States, what began as a rebellion against state-backed money is now finding its way into the heart of government treasuries.</p>
          <p><strong>And yet, at the center of this global shift lies a mystery: Who created Bitcoin?</strong></p>
          <p>As this technology becomes a pillar of the world economy, we must reexamine its origin story and that of its creator.</p>
        </div>
      </div>
    </div>

    <!-- ══════ AN UNEXPECTED RESEARCH OUTCOME ══════ -->
    <div class="editorial-row">
      <div class="editorial-image">
        <img loading="lazy" src="https://i.postimg.cc/R0p6Ldr7/Bitcoin.png" alt="Bitcoin">
        <div class="img-caption">The Bitcoin logo, symbol of a new financial paradigm.</div>
      </div>
      <div class="editorial-text">
        <div class="section-label">An Unexpected Research Outcome</div>
        <h2>The mystery wasn't unsolved. It was guarded.</h2>
        <div class="prose">
          <p>Seven years ago, a group of researchers based in Shanghai set out to investigate the mystery surrounding Satoshi Nakamoto. They decided to call this project The Byzantine General.</p>
          <p>Their approach was simple: attend Bitcoin and crypto conferences, interview as many pioneers and industry leaders as possible, and ask them their thoughts on who invented Bitcoin. Unexpectedly, within just a few meetings, they encountered a surprising pattern.</p>
          <p>These influential figures in the industry suggested that the identity of Satoshi Nakamoto wasn't an unsolved mystery; it was more like <strong>an open secret</strong>. Some of these people even claimed that they had "first-hand knowledge" of who invented Bitcoin.</p>
        </div>
      </div>
    </div>

    <!-- ══════ THE CUBE CLICKED INTO PLACE ══════ -->
    <div class="editorial-row reverse">
      <div class="editorial-image">
        <img loading="lazy" src="https://i.postimg.cc/V64knJ8s/EAF482-D1-2868-4-CF7-B452-F686-A2-F0696-B.jpg" alt="The Satoshi puzzle">
        <div class="img-caption">The Satoshi puzzle clicked into place...</div>
      </div>
      <div class="editorial-text">
        <div class="section-label">A Reality Incompatible With the Myth</div>
        <h2>The cube clicked into place.</h2>
        <div class="prose">
          <p>It seemed, from the outside, that the mystery of Satoshi Nakamoto was an unsolvable puzzle: too layered, too obscure, like a Rubik's Cube with missing pieces.</p>
          <p>But these people had access to the kind of insights that allowed them to assign proper weight to every assumption, and accurate value to every piece of evidence. When seen through that lens, the mystery didn't unravel; it resolved. The cube clicked into place. And what had once seemed unknowable became obvious.</p>
          <p>According to the individuals the research team spoke with back then, the reason this knowledge remained hidden was that <strong>the truth was incompatible with the myth</strong>.</p>
          <p>They did believe that the truth would eventually surface…But it didn't. Now, seven years later, a series of recent developments in the industry make this the right moment to bring it to light.</p>
        </div>
      </div>
    </div>

    <!-- ══════ PHILOSOPHICAL ARCHITECTURE STATEMENT ══════ -->
    <div class="editorial-full">
      <p style="font-family: var(--serif); font-size: clamp(18px, 2.5vw, 26px); font-weight: 400; font-style: italic; color: var(--text-dim); line-height: 1.7; text-align: center; max-width: 800px; margin: 0 auto;">
        Because Bitcoin lacks a traditional hierarchical structure, the mystery surrounding Satoshi has become an integral part of the system's philosophical architecture.
      </p>
    </div>

    <!-- ══════ SATOSHI AS A MYTHICAL FIGURE ══════ -->
    <div class="editorial-row">
      <div class="editorial-image">
        <img loading="lazy" src="https://i.postimg.cc/kXcF6qzR/Myth.png" alt="Satoshi myth">
        <div class="img-caption">The Satoshi myth mental positioning.</div>
      </div>
      <div class="editorial-text">
        <div class="section-label">Satoshi as a Mythical Figure</div>
        <h2>The attributes of a superhero, not a human being.</h2>
        <div class="prose">
          <p>But because of this, many people in the industry, consciously or subconsciously, identify the merits and success of Bitcoin in parts with its mysterious origins.</p>
          <p>To understand what we mean by identification, we would like to invite you to reflect on the mental positioning that Satoshi Nakamoto holds in your mind. For most, Satoshi occupies a space in the mind akin to that of a mythic figure: a lone genius, altruistic, supremely intelligent, untraceable, uninterested in fame or fortune.</p>
          <p>These are the traits we often project (consciously or unconsciously) onto the inventor of Bitcoin.</p>
          <p><strong>The only problem with these traits is that they are not the attributes of a "normal" human being. They are the attributes of a superhero.</strong></p>
          <p>When we start viewing Satoshi through this lens, it becomes clear that he functions as a myth. Myths play powerful roles in both individual psychology and collective society. They are simple, symbolic narratives that represent ideals: often idealized traits or values.</p>
          <p>Because of this, myths are difficult to challenge. They create shared meaning, bring people together, and often shape our understanding of reality. That emotional weight makes myths resistant to scrutiny. But to investigate the true origins of bitcoin we are going to need to deconstruct the myth surrounding Satoshi Nakamoto.</p>
        </div>
      </div>
    </div>

    <!-- ══════ DECONSTRUCTING THE MYTH ══════ -->
    <div class="editorial-row">
      <div class="editorial-image">
        <div class="video-embed" style="position: relative;">
          <video id="reelIntro12" playsinline preload="metadata" style="width:100%; border-radius: 4px; display:block;">
            <source src="reel-intro-1-2.mp4" type="video/mp4">
          </video>
          <div class="video-play-overlay" id="reelIntro12Overlay" onclick="toggleReelVideo('reelIntro12', 'reelIntro12Overlay')">
            <div class="play-button"></div>
          </div>
        </div>
      </div>
      <div class="editorial-text">
        <div class="section-label">Deconstructing the Myth</div>
        <h2>Two layers of resistance</h2>
        <div class="prose">
          <p>To understand why the myth of Satoshi persists (and why so few people confront the evidence), we must deconstruct it.</p>
          <p>More particularly we will examine how the myth operates on two distinct layers:</p>
          <p><strong>1. The Collective Narrative:</strong> This includes media portrayals, public discourse, the crypto community's shared assumptions, and the ideological backdrop of Bitcoin itself.</p>
          <p><strong>2. The Internal Narrative:</strong> This concerns individual cognitive biases, emotional attachments, and the epistemological confusion between facts, evidence, and interpretation.</p>
          <p>Throughout this work, we will distinguish facts from interpretations and proofs from evidence. This is our epistemological framework. Without it, we cannot truly challenge or understand the myth of Satoshi Nakamoto.</p>
        </div>
      </div>
    </div>

    <!-- ══════ CONTEXT AS A DEFINING FACTOR ══════ -->
    <div class="editorial-row reverse">
      <div class="editorial-image">
        <img loading="lazy" src="https://i.postimg.cc/R0LfVKBb/two-doors.png" alt="Two doors">
        <div class="img-caption">A counter-intuitive experiment illustrating conditional probability.</div>
      </div>
      <div class="editorial-text">
        <div class="section-label">Context as a Defining Factor</div>
        <h2>Imagine two doors.</h2>
        <div class="prose">
          <p>To illustrate how cognitive bias and context affect our thinking, consider the following scenario:</p>
          <p>Imagine that you are faced with two doors. Behind one of these doors is $1,000,000. What are the odds that the money is behind door one or door two? Most people say 50-50. But the correct answer is: <strong>it depends</strong>. It depends on the context in which this situation occurs.</p>
        </div>
      </div>
    </div>

    <!-- ══════ THE MONTY HALL PROBLEM ══════ -->
    <div class="editorial-full">
      <div class="section-label">Probability Misconceptions</div>
      <h2 style="font-family: var(--serif); font-size: clamp(22px, 3vw, 36px); font-weight: 400; color: var(--text); line-height: 1.3; margin-bottom: 24px;">The Monty Hall Problem</h2>
      <div class="prose">
        <p>To better understand how and why context impacts such probabilities, let's look at the Monty Hall problem. Imagine you're on a game show with three doors. Behind one door is $1,000,000. Let's say you choose door number 1. The host, who knows where the prize is, opens another door, for example door number 3, to show it's empty. Then you're given a choice: stick with your original pick or switch.</p>
      </div>
    </div>

    <!-- Monty Hall illustration 1 -->
    <div style="max-width: 700px; margin: 40px auto; padding: 0 20px;">
      <img loading="lazy" src="https://i.postimg.cc/g0g1wGfK/EE81D303-EEB0-4422-9866-CD0AAC946942.jpg" alt="The Monty Hall Problem" style="width: 100%; border-radius: 4px; display: block;">
    </div>

    <!-- Explanation -->
    <div class="editorial-full">
      <div class="prose">
        <p>Most people in that particular scenario stick with their original choice. Why is that? In short: <strong>Emotional biases</strong>.</p>
        <p>First, they assume that the odds of the money being behind door 1 and 2 is 50-50. Second, they want to trust their first intuition, fearing to regret switching in case their first choice was the correct one. Often, participants also suspect that the anchor is trying to lure them away from their original correct choice.</p>
      </div>
    </div>

    <!-- Monty Hall illustration 2 -->
    <div style="max-width: 700px; margin: 40px auto; padding: 0 20px;">
      <img loading="lazy" src="https://i.postimg.cc/kg9HfV9d/454EF3E5-3FDE-438B-B0E6-77EC69F191CB.jpg" alt="Three doors with one open" style="width: 100%; border-radius: 4px; display: block;">
    </div>

    <!-- ══════ ASYMMETRY OF INFORMATION ══════ -->
    <div class="editorial-row">
      <div class="editorial-image">
        <div class="video-embed" style="position: relative;">
          <video id="reelIntro2" playsinline preload="metadata" poster="thumb-intro-2.jpg" style="width:100%; border-radius: 4px; display:block;">
            <source src="reel-intro-2.mp4" type="video/mp4">
          </video>
          <div class="video-play-overlay" id="reelIntro2Overlay" onclick="toggleReelVideo('reelIntro2', 'reelIntro2Overlay')">
            <div class="play-button"></div>
          </div>
        </div>
      </div>
      <div class="editorial-text">
        <div class="section-label">A Transfer of Probability</div>
        <h2>Asymmetry of information</h2>
        <div class="prose">
          <p>The fact is that, statistically, you're twice as likely to win if you switch. Why? Because in that particular context, there is an asymmetry of information between you, who don't know behind which door the money is, and the anchor who knows with 100% certainty where the money is. That asymmetry is the reason for the shift in probability. Most people don't intuitively understand this because they neglect the context.</p>
        </div>
      </div>
    </div>

    <!-- ══════ 100 DOORS ══════ -->
    <!-- 100 doors illustration 1 -->
    <div style="max-width: 700px; margin: 40px auto; padding: 0 20px;">
      <img loading="lazy" src="https://i.postimg.cc/8cMybG0P/F1DCF097-8254-454B-BCAF-5F44D84A89FB.jpg" alt="100 doors illustration" style="width: 100%; border-radius: 4px; display: block;">
    </div>

    <div class="editorial-full">
      <div class="section-label">The One Hundred Doors Scenario</div>
      <h2 style="font-family: var(--serif); font-size: clamp(22px, 3vw, 36px); font-weight: 400; color: var(--text); line-height: 1.3; margin-bottom: 24px;">99% vs 1%</h2>
      <div class="prose">
        <p>Now imagine this scenario expanded to 100 doors. You pick one. The host, knowing where the prize is, opens 98 of the others. The only doors left are your original choice and one unopened door.</p>
        <p>It becomes obvious: your original choice still has only a 1% chance, while the unopened door now holds a 99% likelihood. This illustrates how probability shifts with new context and information.</p>
      </div>
    </div>

    <!-- 100 doors illustration 2 -->
    <div style="max-width: 700px; margin: 40px auto; padding: 0 20px;">
      <img loading="lazy" src="https://i.postimg.cc/Kv7qkZTz/4FBA037B-0790-4DD4-9D37-0D388961989E.jpg" alt="100 doors probability" style="width: 100%; border-radius: 4px; display: block;">
    </div>

    <!-- 100-Door Game -->
    <div style="padding: 60px 0; border-top: 1px solid var(--border); max-width: 900px; margin: 0 auto;">
      <div style="text-align: center; margin-bottom: 40px;">
        <h2 style="font-family: var(--serif); font-size: clamp(24px, 4vw, 36px); font-weight: 400; color: var(--text); margin-bottom: 16px;">Now imagine 100 doors...</h2>
        <p style="font-family: var(--sans); font-size: 14px; color: var(--text-dim); max-width: 600px; margin: 0 auto; line-height: 1.6;">You pick one door. The host opens 98 empty doors. Two doors remain: yours and one other. Would you switch?</p>
      </div>
      <div id="hundredDoorsGame" style="max-width: 900px; margin: 0 auto; padding: 40px 20px;">
        <div id="hundredInstruction" style="text-align: center; margin-bottom: 40px;">
          <div style="font-family: var(--serif); font-size: 22px; font-weight: 400; color: var(--text); margin-bottom: 12px;">Choose a door.</div>
          <div style="font-family: var(--sans); font-size: 13px; color: var(--text-muted);">Click on one of the 100 doors below.</div>
        </div>
        <div id="doorsGrid" style="display: grid; grid-template-columns: repeat(10, 1fr); gap: 8px; margin-bottom: 40px; max-width: 600px; margin-left: auto; margin-right: auto;"></div>
        <div id="hundredResult" style="display: none; text-align: center; margin: 40px 0;">
          <div id="hundredResultText" style="font-family: var(--serif); font-size: 20px; color: var(--text); margin-bottom: 16px;"></div>
          <div id="hundredResultExplain" style="font-family: var(--sans); font-size: 13px; color: var(--text-dim); max-width: 500px; margin: 0 auto; line-height: 1.6;"></div>
          <button onclick="reset100DoorGame()" style="font-family: var(--mono); font-size: 10px; letter-spacing: 3px; text-transform: uppercase; color: var(--accent-dim); background: none; border: 1px solid var(--border-dim); padding: 10px 24px; cursor: pointer; margin-top: 24px;">Play Again</button>
        </div>
        <div id="hundredStats" style="display: flex; justify-content: center; gap: 40px; padding-top: 24px; border-top: 1px solid var(--border); margin-top: 40px;">
          <div style="text-align: center;"><div style="font-family: var(--mono); font-size: 22px; color: var(--text);" id="stat100SwitchWins">0</div><div style="font-family: var(--mono); font-size: 8px; letter-spacing: 3px; color: var(--text-muted); text-transform: uppercase; margin-top: 4px;">Switch Wins</div></div>
          <div style="text-align: center;"><div style="font-family: var(--mono); font-size: 22px; color: var(--text);" id="stat100StayWins">0</div><div style="font-family: var(--mono); font-size: 8px; letter-spacing: 3px; color: var(--text-muted); text-transform: uppercase; margin-top: 4px;">Stay Wins</div></div>
          <div style="text-align: center;"><div style="font-family: var(--mono); font-size: 22px; color: var(--accent);" id="stat100Total">0</div><div style="font-family: var(--mono); font-size: 8px; letter-spacing: 3px; color: var(--text-muted); text-transform: uppercase; margin-top: 4px;">Games Played</div></div>
        </div>
      </div>
    </div>

    <!-- ══════ APPLYING MONTY HALL TO SATOSHI ══════ -->
    <div class="editorial-full">
      <div class="section-label">Applying Monty Hall to Satoshi</div>
      <h2 style="font-family: var(--serif); font-size: clamp(22px, 3vw, 36px); font-weight: 400; color: var(--text); line-height: 1.3; margin-bottom: 24px;">Narrowing down the doors</h2>
      <div class="prose">
        <p>Over the years, numerous theories have been proposed about who Satoshi is. These theories are usually built on assumptions aiming at narrowing down the possibilities to one final "door".</p>
        <p>The most common hypotheses revolve around the technical expertise, the breadth and depth of knowledge and know-how required to invent Bitcoin. Other factors taken into consideration include elements we could categorize as "social evidence" (such as the candidate's timeline matching that of Satoshi's).</p>
      </div>
    </div>

    <!-- ══════ THE USUAL SUSPECTS ══════ -->
    <div class="editorial-row reverse">
      <div class="editorial-image">
        <img loading="lazy" src="https://i.postimg.cc/Kz0x3KPs/490-B8570-3-DA4-441-D-A779-12-EE72-C00451.jpg" alt="Satoshi candidates">
        <div class="img-caption">The usual suspects proposed as potential Satoshi candidates.</div>
      </div>
      <div class="editorial-text">
        <div class="section-label">The Usual Suspects</div>
        <h2>The Satoshi candidates</h2>
        <div class="prose">
          <p>The Usual suspects to the best "Satoshi Nakamoto candidate" award include: Nick Szabo, creator of Bit Gold. Hal Finney, early cryptographer and Bitcoin collaborator. Adam Back, creator of HashCash.</p>
          <p>Each of these individuals has technical credibility and a timeline that matches that of Satoshi. The fact is that each of them has denied being Satoshi. But more importantly none have conclusive evidence attached to them.</p>
        </div>
      </div>
    </div>

    <!-- ══════ EXPANDING POOL ══════ -->
    <div class="editorial-row">
      <div class="editorial-image">
        <img loading="lazy" src="https://i.postimg.cc/GhgRJ9H0/A9410-D9-C-70-FB-4897-96-AE-159682-DAD6-D7.jpg" alt="Expanding candidates">
        <div class="img-caption">The expanding pool of Satoshi candidates.</div>
      </div>
      <div class="editorial-text">
        <div class="section-label">The Expanding Pool of Satoshi Candidates</div>
        <h2>Diluting the possibilities</h2>
        <div class="prose">
          <p>New candidates have been proposed constantly (Peter Todd, Jack Dorsey, and others), diluting the pool of possibilities. As a result, the probability of correctly guessing Satoshi's identity is spread across an ever increasing list of names, which reinforces the notion that the mystery will never be solved...Which reinforces the myth.</p>
        </div>
      </div>
    </div>

    <!-- ══════ CRYPTOGRAPHIC EVIDENCE ══════ -->
    <div class="editorial-row reverse">
      <div class="editorial-image">
        <img loading="lazy" src="https://i.postimg.cc/3NWwhHL7/public-private-key-pair-feature.jpg" alt="Cryptographic proof">
        <div class="img-caption">Cryptographic proof is the only conclusive evidence of Satoshi's identity.</div>
      </div>
      <div class="editorial-text">
        <div class="section-label">Cryptographic Evidence for the Win</div>
        <h2>A category of evidence on an entirely different level</h2>
        <div class="prose">
          <p>It seems increasingly clear that a methodology based on identifying technical expertise and social proof will never produce a definitive answer. Fortunately, Bitcoin offers a category of evidence that exists on an entirely different level: <strong>cryptographic proofs</strong>.</p>
          <p>We know that on January 3rd, 2009, Satoshi Nakamoto launched the Bitcoin software and mined the Genesis block. Associated with that block are a pair of cryptographic keys: one public, one private. To this day, no technology exists that can break the encryption protecting these keys.</p>
        </div>
      </div>
    </div>

    <!-- ══════ BLOWING OPEN ALL THE WRONG DOORS ══════ -->
    <div class="editorial-row">
      <div class="editorial-image">
        <img loading="lazy" src="https://i.postimg.cc/Qd78YdDH/70123-F04-7-C4-A-4337-9-E30-D779-B5-CAEDDA-1-105-c.jpg" alt="One door remains">
        <div class="img-caption">The proof-based door carries nearly all the remaining probability weight.</div>
      </div>
      <div class="editorial-text">
        <div class="section-label">Blowing Open All the Wrong Doors</div>
        <h2>Only one door remains standing.</h2>
        <div class="prose">
          <p>As a result, anyone who can demonstrate control over the private key associated with the Genesis block would, in a single act, collapse the entire mystery. It would be the equivalent of the Monty Hall host flinging open all the wrong doors, leaving only one standing.</p>
          <p>People could still choose to cling to their original guesses. But those who understand context and probability would recognize that the unopened door (now linked to proof) holds nearly all the remaining weight.</p>
        </div>
      </div>
    </div>

    <!-- ══════ CLOSING STATEMENT + REEL INTRO 3 ══════ -->
    <div class="editorial-row">
      <div class="editorial-image">
        <div class="video-embed" style="position: relative;">
          <video id="reelIntro3" playsinline preload="metadata" poster="thumb-intro-3.jpg" style="width:100%; border-radius: 4px; display:block;">
            <source src="reel-intro-3.mp4" type="video/mp4">
          </video>
          <div class="video-play-overlay" id="reelIntro3Overlay" onclick="toggleReelVideo('reelIntro3', 'reelIntro3Overlay')">
            <div class="play-button"></div>
          </div>
        </div>
      </div>
      <div class="editorial-text" style="display:flex; align-items:center;">
        <p style="font-family: var(--serif); font-size: clamp(18px, 2.5vw, 26px); font-weight: 400; font-style: italic; color: var(--text-dim); line-height: 1.7;">
          And now, equipped with this clearer understanding of conditional probability and emotional biases, we are ready to dive into the series of historical events that led to Bitcoin's invention.
        </p>
      </div>
    </div>

    <!-- ══════ COUNTDOWN TO NEXT ACT ══════ -->
    <div class="gate-section" id="countdownGate">
      <div class="gate-door-icon"></div>
      <h2 class="gate-title" id="countdownTitle">Act 1 Coming Soon</h2>
      <p class="gate-subtitle" id="countdownSubtitle" style="margin-bottom: 8px;">The investigation begins.</p>
      <div class="countdown-clock" id="countdownClock">
        <div class="countdown-block">
          <div class="cd-number" id="cdDays">00</div>
          <div class="cd-label">Days</div>
        </div>
        <div class="countdown-divider">:</div>
        <div class="countdown-block">
          <div class="cd-number" id="cdHours">00</div>
          <div class="cd-label">Hours</div>
        </div>
        <div class="countdown-divider">:</div>
        <div class="countdown-block">
          <div class="cd-number" id="cdMins">00</div>
          <div class="cd-label">Minutes</div>
        </div>
        <div class="countdown-divider">:</div>
        <div class="countdown-block">
          <div class="cd-number" id="cdSecs">00</div>
          <div class="cd-label">Seconds</div>
        </div>
      </div>
      <a class="landing-cta-btn" id="countdownBtn" style="display:none; cursor:pointer; text-decoration:none; margin-top: 24px;">Enter Act 1</a>
    </div>
    <script>
    (function(){
      var NEXT_RELEASE = "2026-03-15T18:00:00Z";
      var NEXT_URL = "act1.html";
      var btn = document.getElementById('countdownBtn');
      var clock = document.getElementById('countdownClock');
      var title = document.getElementById('countdownTitle');
      var subtitle = document.getElementById('countdownSubtitle');
      var dEl = document.getElementById('cdDays');
      var hEl = document.getElementById('cdHours');
      var mEl = document.getElementById('cdMins');
      var sEl = document.getElementById('cdSecs');
      btn.onclick = function(){ window.location.href = NEXT_URL; };
      function pad(n){ return n < 10 ? '0' + n : '' + n; }
      function update(){
        var now = new Date().getTime();
        var target = new Date(NEXT_RELEASE).getTime();
        var diff = target - now;
        if(diff <= 0){
          clock.style.display = 'none';
          title.textContent = 'Act 1 is Now Available';
          subtitle.textContent = 'The investigation begins.';
          btn.style.display = '';
          return;
        }
        var d = Math.floor(diff / 86400000);
        var h = Math.floor((diff % 86400000) / 3600000);
        var m = Math.floor((diff % 3600000) / 60000);
        var s = Math.floor((diff % 60000) / 1000);
        dEl.textContent = pad(d);
        hEl.textContent = pad(h);
        mEl.textContent = pad(m);
        sEl.textContent = pad(s);
        requestAnimationFrame(update);
      }
      update();
    })();
    </script>

  </div><!-- /intro-container -->

  <!-- Footer -->
  <div class="site-footer">
    <div class="footer-title">The Byzantine General</div>
    <div class="footer-sub">Research work · 2018–2026</div>
  </div>
</div><!-- /intro-page -->


<script>
  // ═══════════════════════════════════════
  // LOADING SCREEN RAPID FLASH
  // ═══════════════════════════════════════

  const flashImages = [
    'https://i.postimg.cc/W3c5zwgw/newswekk.jpg',
    'https://i.postimg.cc/50yThcsy/byz-pic.png',
    'https://i.postimg.cc/L4LF2SHh/assange-clear.png',
    'https://i.postimg.cc/9fdgsmdy/Hal-finney-copy.png',
    'https://i.postimg.cc/T1M8g7cX/Dorian-copy.png',
    'https://i.postimg.cc/xdhBVxhz/silk-road-anonymous.jpg',
    'https://i.postimg.cc/qMwYvMWT/5A5AB807-45A2-4B12-A5D6-A04C42BB3080.jpg'
  ];

  function initLoader() {
    const sequence = document.getElementById('flashSequence');
    const progressFill = document.getElementById('loaderProgressFill');
    const progressBar = document.getElementById('loaderProgress');
    const loaderPercent = document.getElementById('loaderPercent');
    const imageDuration = 350; // ms each image is shown
    const gapDuration = 80;   // ms white flash between
    const total = flashImages.length;

    // Preload all images
    flashImages.forEach(src => {
      const img = new Image();
      img.src = src;
    });

    let currentIdx = 0;

    function showNext() {
      if (currentIdx >= total) {
        // Fill progress to 100%
        progressFill.style.width = '100%';
        loaderPercent.textContent = '100%';
        // All done, fade out flash sequence, then reveal landing page behind loader
        setTimeout(() => {
          sequence.style.opacity = '0';
          progressBar.style.opacity = '0';
          progressBar.style.transition = 'opacity 0.3s ease';
          loaderPercent.style.opacity = '0';
          setTimeout(() => {
            sequence.style.display = 'none';
            progressBar.style.display = 'none';
            // Prepare landing page behind the loader (loader is z-index 1000, so it covers it)
            enterSite();
            // Now fade out the loader to reveal the landing hero title already in place
            // Small delay so landing page renders first
            setTimeout(() => {
              document.getElementById('loader').classList.add('hidden');
            }, 100);
          }, 300);
        }, 200);
        return;
      }

      // Update progress bar and percentage
      const pct = Math.round((currentIdx + 1) / total * 100);
      progressFill.style.width = pct + '%';
      loaderPercent.textContent = pct + '%';

      // Create image element
      const container = document.createElement('div');
      container.className = 'loader-image-container';
      container.style.opacity = '1';
      const img = document.createElement('img');
      img.src = flashImages[currentIdx];
      img.alt = 'Flash ' + (currentIdx + 1);
      container.appendChild(img);

      // Clear previous and show new
      sequence.innerHTML = '';
      sequence.appendChild(container);

      currentIdx++;

      // After image duration, briefly flash white, then show next
      setTimeout(() => {
        container.style.opacity = '0';
        container.style.transition = 'opacity 60ms ease';
        setTimeout(showNext, gapDuration);
      }, imageDuration);
    }

    // Start the sequence after a brief delay
    setTimeout(showNext, 500);
  }

  function skipLoader() {
    enterSite();
    document.getElementById('loader').classList.add('hidden');
  }

  let hasEntered = false;
  function enterSite() {
    if (hasEntered) return;
    hasEntered = true;
    // Set up the landing page (loader stays on top, will be faded separately)
    document.getElementById('landing-scroll-container').classList.add('visible');
    initArtboard();
    initLandingScroll();
  }

  // ═══════════════════════════════════════
  // SCROLL-DRIVEN LANDING, MATRIX RAIN REVEAL
  // ═══════════════════════════════════════
  function initLandingScroll() {
    const spacer = document.getElementById('tilesSpacer');
    const header = document.getElementById('landingHeader');
    const viewport = document.getElementById('tilesViewport');
    const totalCols = columnPool.length;

    // ── BUILD REVEAL ORDER ──
    // Sort columns by their on-screen X position (left-to-right with some randomness).
    // We use the pool index modulo originalColumnCount to create a sequential sweep,
    // then add slight random offset for organic feel.
    const revealOrder = columnPool.map((_, i) => i);
    // Shuffle slightly within groups of 2-3 for organic feel
    for (let i = 0; i < revealOrder.length - 1; i += 2) {
      if (Math.random() > 0.5 && i + 1 < revealOrder.length) {
        [revealOrder[i], revealOrder[i + 1]] = [revealOrder[i + 1], revealOrder[i]];
      }
    }

    // Each column gets a unique reveal point spread across the enter/exit phases
    const enterStart = 0.04;  // first column starts appearing at 4% scroll
    const enterEnd = 0.22;    // last column fully in by 22%
    const exitStart = 0.78;   // first column starts disappearing at 78%
    const exitEnd = 0.94;     // last column gone by 94%

    const colTimings = [];
    for (let rank = 0; rank < totalCols; rank++) {
      const colIdx = revealOrder[rank];
      const t = totalCols > 1 ? rank / (totalCols - 1) : 0;
      colTimings[colIdx] = {
        enterAt: enterStart + t * (enterEnd - enterStart),
        exitAt: exitStart + t * (exitEnd - exitStart),
      };
    }

    // Set per-column CSS transitions (enter: longer for drama, exit: shorter)
    columnPool.forEach((poolCol, i) => {
      poolCol.el.style.transition = 'opacity 1.2s cubic-bezier(0.16, 1, 0.3, 1)';
    });

    let prevScrollY = window.scrollY;
    let ticking = false;
    let colStates = new Array(totalCols).fill('hidden'); // 'hidden' | 'visible' | 'exiting'

    function onLandingScroll() {
      const scrollY = window.scrollY;
      const vh = window.innerHeight;

      const spacerTop = spacer.offsetTop;
      const spacerHeight = spacer.offsetHeight;
      const rawProgress = (scrollY - spacerTop + vh) / spacerHeight;
      const progress = Math.max(0, Math.min(1, rawProgress));

      // ── PER-COLUMN MATRIX RAIN ──
      columnPool.forEach((poolCol, i) => {
        const timing = colTimings[i];
        if (!timing) return;

        if (progress >= timing.enterAt && progress < timing.exitAt) {
          // Column should be visible
          if (colStates[i] !== 'visible') {
            poolCol.el.classList.remove('col-exiting');
            poolCol.el.classList.add('col-revealed');
            poolCol.el.style.transition = 'opacity 1.2s cubic-bezier(0.16, 1, 0.3, 1)';
            colStates[i] = 'visible';
          }
        } else if (progress >= timing.exitAt) {
          // Column should exit
          if (colStates[i] !== 'exiting') {
            poolCol.el.classList.remove('col-revealed');
            poolCol.el.classList.add('col-exiting');
            poolCol.el.style.transition = 'opacity 0.8s cubic-bezier(0.4, 0, 1, 1)';
            colStates[i] = 'exiting';
          }
        } else {
          // Column should be hidden
          if (colStates[i] !== 'hidden') {
            poolCol.el.classList.remove('col-revealed');
            poolCol.el.classList.remove('col-exiting');
            colStates[i] = 'hidden';
          }
        }
      });

      // ── HEADER, visible when most columns are showing ──
      const visibleCount = colStates.filter(s => s === 'visible').length;
      if (header) {
        header.style.opacity = visibleCount > totalCols * 0.5 ? '1' : '0';
      }

      // ── DRIVE TILE Y FROM PAGE SCROLL ──
      const scrollDelta = scrollY - prevScrollY;
      canvasTarget.y -= scrollDelta * 1.2;
      prevScrollY = scrollY;

      ticking = false;
    }

    window.addEventListener('scroll', () => {
      if (!ticking) {
        ticking = true;
        requestAnimationFrame(onLandingScroll);
      }
    }, { passive: true });

    // Initial state
    onLandingScroll();
  }

  function closeIntroPanel() {
    document.getElementById('artboardIntro').classList.remove('visible');
  }

  // ═══════════════════════════════════════
  // ARTBOARD MANAGEMENT
  // ═══════════════════════════════════════

  let artboardContainer = null;
  let artboardCanvas = null;
  let isDragging = false;
  let hasDragged = false;
  let dragStart = { x: 0, y: 0 };
  let canvasPos = { x: 0, y: 0 };
  let canvasTarget = { x: 0, y: 0 };
  let lastMouse = { x: 0, y: 0 };
  let velocity = { x: 0, y: 0 };
  let animFrame = null;

  let columns = [];

  // Infinite tiling data
  let columnTileData = []; // per original column: { originalHeight, speed }
  let originalColumnCount = 0;
  let colWidth = 324; // 320px tile + 4px gap
  let totalOriginalWidth = 0;

  // We create a pool of column DOM elements to fill the viewport + buffer
  let columnPool = []; // { el, colIdx (which original column it represents) }

  function setupInfiniteTiling() {
    originalColumnCount = columns.length;
    totalOriginalWidth = originalColumnCount * colWidth;

    // For each original column: measure height, clone tiles vertically (5x)
    columns.forEach((col, ci) => {
      const originalHTML = col.el.innerHTML;
      const colHeight = col.el.scrollHeight;
      columnTileData[ci] = { originalHeight: colHeight, speed: col.speed, html: originalHTML };

      // Clone tiles to make each column 5x taller for seamless vertical wrapping
      for (let r = 1; r < 5; r++) {
        col.el.insertAdjacentHTML('beforeend', originalHTML);
      }
    });

    // Determine how many column slots we need to fill viewport + buffer on both sides
    const vw = window.innerWidth;
    const slotsNeeded = Math.ceil(vw / colWidth) + 4; // extra buffer

    // Create column pool: enough cloned columns to always cover the viewport
    // We keep the originals and add clones
    columns.forEach((col, ci) => {
      columnPool.push({ el: col.el, colIdx: ci });
    });

    // Clone additional columns to fill the pool
    while (columnPool.length < slotsNeeded * 2) {
      const ci = columnPool.length % originalColumnCount;
      const clone = columns[ci].el.cloneNode(true);
      artboardCanvas.appendChild(clone);
      columnPool.push({ el: clone, colIdx: ci });
    }
  }

  function clampCanvas() {
    // No clamping, infinite in all directions
  }

  function applyCanvasPosition() {
    const vw = window.innerWidth;
    const vh = window.innerHeight;

    // For each column in the pool, calculate its X position with wrapping
    columnPool.forEach((poolCol, i) => {
      const ci = poolCol.colIdx;
      const data = columnTileData[ci];

      // Base X position for this pool slot (spaced evenly)
      const baseX = i * colWidth + canvasPos.x;

      // Wrap X so columns tile infinitely
      const totalPoolWidth = columnPool.length * colWidth;
      let wrappedX = ((baseX % totalPoolWidth) + totalPoolWidth) % totalPoolWidth;
      // Center: shift so some columns appear to the left of viewport
      wrappedX = wrappedX - colWidth * 4;

      poolCol.el.style.left = wrappedX + 'px';

      // Vertical parallax with wrapping
      const py = canvasPos.y * data.speed;
      if (data.originalHeight > 0) {
        const wrapped = ((py % data.originalHeight) + data.originalHeight) % data.originalHeight;
        poolCol.el.style.transform = `translateY(${wrapped - data.originalHeight}px)`;
      }
    });
  }

  function animateCanvas() {
    canvasPos.x += (canvasTarget.x - canvasPos.x) * 0.12;
    canvasPos.y += (canvasTarget.y - canvasPos.y) * 0.12;

    if (!isDragging) {
      // Gentle auto-drift for ambient motion
      canvasTarget.x += velocity.x + 0.15;
      canvasTarget.y += velocity.y;
      velocity.x *= 0.92;
      velocity.y *= 0.92;
      clampCanvas();
      if (Math.abs(velocity.x) < 0.1) velocity.x = 0;
      if (Math.abs(velocity.y) < 0.1) velocity.y = 0;
    }

    applyCanvasPosition();
    animFrame = requestAnimationFrame(animateCanvas);
  }

  function initArtboard() {
    artboardCanvas = document.getElementById('artboardCanvas');
    artboardContainer = document.getElementById('artboard-section');

    // Gather columns with their parallax speeds
    columns = [];
    artboardCanvas.querySelectorAll('.mosaic-column').forEach(el => {
      columns.push({ el, speed: parseFloat(el.dataset.parallax) || 1.0 });
    });

    // Setup infinite tiling, clone tiles and column pool for seamless wrapping
    setupInfiniteTiling();

    // Start position
    canvasPos.x = canvasTarget.x = 0;
    canvasPos.y = canvasTarget.y = -60;
    applyCanvasPosition();

    initScrollbars();

    // Drag handling on the entire artboard container
    let pointerDownTarget = null;
    artboardContainer.addEventListener('pointerdown', (e) => {
      if (e.target.closest('.scrollbar-thumb')) return;
      if (e.target.closest('.artboard-intro-panel')) return;
      if (e.target.closest('.artboard-header')) return;
      isDragging = true;
      hasDragged = false;
      pointerDownTarget = e.target;
      dragStart = { x: e.clientX, y: e.clientY };
      lastMouse = { x: e.clientX, y: e.clientY };
      velocity = { x: 0, y: 0 };
      artboardCanvas.classList.add('dragging');
      artboardContainer.setPointerCapture(e.pointerId);
      e.preventDefault();
    });

    artboardContainer.addEventListener('pointermove', (e) => {
      if (!isDragging) return;

      const dx = e.clientX - lastMouse.x;
      const dy = e.clientY - lastMouse.y;

      // Track if user actually dragged (not just clicked)
      const totalDrag = Math.abs(e.clientX - dragStart.x) + Math.abs(e.clientY - dragStart.y);
      if (totalDrag > 5) hasDragged = true;

      canvasTarget.x += dx;
      canvasTarget.y += dy;
      clampCanvas();

      velocity = { x: dx, y: dy };
      lastMouse = { x: e.clientX, y: e.clientY };
    });

    artboardContainer.addEventListener('pointerup', (e) => {
      if (!isDragging) return;
      isDragging = false;
      artboardCanvas.classList.remove('dragging');

      // If user clicked (not dragged), scroll to Begin the Investigation
      if (!hasDragged) {
        document.getElementById('landingCta').scrollIntoView({ behavior: 'smooth' });
      }
    });

    // Mouse wheel scrolling, in landing mode, let page scroll drive tiles
    // Only intercept wheel if shift is held (for horizontal tile movement)
    artboardContainer.addEventListener('wheel', (e) => {
      if (e.shiftKey) {
        e.preventDefault();
        canvasTarget.x -= e.deltaY * 0.8;
      }
      // Vertical scrolling passes through to page scroll, which drives tiles via initLandingScroll
    }, { passive: false });

    // Start animation loop
    animateCanvas();
  }

  function getCanvasMetrics() {
    // With infinite scrolling, metrics are mainly for reference
    const vw = window.innerWidth;
    const vh = window.innerHeight;
    return { cw: totalOriginalWidth, ch: 2000, vw, vh, maxX: totalOriginalWidth, maxY: 2000 };
  }

  function initScrollbars() {
    const hTrack = document.getElementById('hScrollTrack');
    const vTrack = document.getElementById('vScrollTrack');
    const hThumb = document.getElementById('hScrollThumb');
    const vThumb = document.getElementById('vScrollThumb');
    if (!hTrack || !vTrack || !hThumb || !vThumb) return;

    hThumb.addEventListener('pointerdown', (e) => {
      e.stopPropagation();
      const startX = e.clientX;
      const startLeft = hThumb.offsetLeft;
      const trackW = hTrack.offsetWidth;
      const m = getCanvasMetrics();

      const onMove = (ev) => {
        const delta = ev.clientX - startX;
        const newLeft = Math.max(0, Math.min(startLeft + delta, trackW - hThumb.offsetWidth));
        const pct = newLeft / (trackW - hThumb.offsetWidth);
        canvasTarget.x = -pct * m.maxX;
        clampCanvas();
      };
      const onUp = () => { document.removeEventListener('pointermove', onMove); document.removeEventListener('pointerup', onUp); };
      document.addEventListener('pointermove', onMove);
      document.addEventListener('pointerup', onUp);
    });

    vThumb.addEventListener('pointerdown', (e) => {
      e.stopPropagation();
      const startY = e.clientY;
      const startTop = vThumb.offsetTop;
      const trackH = vTrack.offsetHeight;
      const m = getCanvasMetrics();

      const onMove = (ev) => {
        const delta = ev.clientY - startY;
        const newTop = Math.max(0, Math.min(startTop + delta, trackH - vThumb.offsetHeight));
        const pct = newTop / (trackH - vThumb.offsetHeight);
        canvasTarget.y = -pct * m.maxY;
        clampCanvas();
      };
      const onUp = () => { document.removeEventListener('pointermove', onMove); document.removeEventListener('pointerup', onUp); };
      document.addEventListener('pointermove', onMove);
      document.addEventListener('pointerup', onUp);
    });
  }

  function updateScrollbars() {
    const hThumb = document.getElementById('hScrollThumb');
    const vThumb = document.getElementById('vScrollThumb');
    const hTrack = document.getElementById('hScrollTrack');
    const vTrack = document.getElementById('vScrollTrack');
    if (!hThumb || !vThumb || !hTrack || !vTrack || !artboardCanvas) return;

    const m = getCanvasMetrics();
    const pctX = m.maxX > 0 ? Math.abs(canvasPos.x) / m.maxX : 0;
    const pctY = m.maxY > 0 ? Math.abs(canvasPos.y) / m.maxY : 0;

    const thumbW = Math.max(30, (m.vw / m.cw) * hTrack.offsetWidth);
    const thumbH = Math.max(30, (m.vh / m.ch) * vTrack.offsetHeight);

    hThumb.style.width = thumbW + 'px';
    hThumb.style.left = pctX * (hTrack.offsetWidth - thumbW) + 'px';
    vThumb.style.height = thumbH + 'px';
    vThumb.style.top = pctY * (vTrack.offsetHeight - thumbH) + 'px';
  }


  function switchPage(hideId, showId, afterCb) {
    document.getElementById(hideId).classList.remove('visible');
    var target = document.getElementById(showId);
    target.classList.add('visible');
    target.scrollTop = 0;
    if (afterCb) afterCb();
  }

  function openIntro() {
    if (animFrame) cancelAnimationFrame(animFrame);
    var introPanel = document.getElementById('artboardIntro');
    if (introPanel) introPanel.classList.remove('visible');
    document.getElementById('landing-scroll-container').classList.remove('visible');
    var target = document.getElementById('intro-page');
    target.classList.add('visible');
    target.scrollTop = 0;
    montyInit();
    initHundredDoorGame();
  }

  function openAct1() { switchPage('intro-page', 'act1-page'); }
  function backToIntro() { switchPage('act1-page', 'intro-page', function() { montyInit(); initHundredDoorGame(); }); }
  function openAct2() { switchPage('act1-page', 'act2-page'); }
  function backToAct1() { switchPage('act2-page', 'act1-page'); }
  function openAct3() { switchPage('act2-page', 'act3-page'); }
  function backToAct2() { switchPage('act3-page', 'act2-page'); }
  function openAct4() { switchPage('act3-page', 'act4-page'); }
  function backToAct3() { switchPage('act4-page', 'act3-page'); }
  function openAct5() { switchPage('act4-page', 'act5-page'); }
  function backToAct4() { switchPage('act5-page', 'act4-page'); }
  function openAct6() { switchPage('act5-page', 'act6-page'); }
  function backToAct5() { switchPage('act6-page', 'act5-page'); }
  function openAct7() { switchPage('act6-page', 'act7-page'); }
  function backToAct6() { switchPage('act7-page', 'act6-page'); }

  function backToArtboard() {
    ['intro-page','act1-page','act2-page','act3-page','act4-page','act5-page','act6-page','act7-page'].forEach(function(id) {
      var el = document.getElementById(id);
      if (el) el.classList.remove('visible');
    });
    document.getElementById('landing-scroll-container').classList.add('visible');
    window.scrollTo(0, 0);
    animateCanvas();
  }

  // ═══════════════════════════════════════
  // EXPANDABLE CARDS
  // ═══════════════════════════════════════

  function toggleCard(card) {
    card.classList.toggle('active');
  }

  // Generic reel video toggle
  function toggleReelVideo(videoId, overlayId) {
    const video = document.getElementById(videoId);
    const overlay = document.getElementById(overlayId);
    if (!video || !overlay) return;
    if (video.paused) {
      video.play();
      overlay.classList.add('hidden');
    } else {
      video.pause();
      overlay.classList.remove('hidden');
    }
    // Set up ended listener once
    if (!video.dataset.listenerSet) {
      video.addEventListener('ended', () => overlay.classList.remove('hidden'));
      video.addEventListener('click', () => {
        if (!video.paused) { video.pause(); overlay.classList.remove('hidden'); }
      });
      video.dataset.listenerSet = 'true';
    }
  }

  // Video player
  function toggleIntroVideo() {
    const video = document.getElementById('introVideo');
    const overlay = document.getElementById('videoPlayOverlay');
    if (video.paused) {
      video.play();
      overlay.classList.add('hidden');
    } else {
      video.pause();
      overlay.classList.remove('hidden');
    }
  }
  // Show play overlay again when video ends or is clicked while playing
  document.addEventListener('DOMContentLoaded', () => {
    const video = document.getElementById('introVideo');
    const overlay = document.getElementById('videoPlayOverlay');
    if (video) {
      video.addEventListener('ended', () => {
        overlay.classList.remove('hidden');
      });
      video.addEventListener('click', () => {
        if (!video.paused) {
          video.pause();
          overlay.classList.remove('hidden');
        }
      });
    }
  });

  // ═══════════════════════════════════════
  // MONTY HALL GAME
  // ═══════════════════════════════════════

  let montyState = {
    prizeDoor: -1,
    chosenDoor: -1,
    revealedDoor: -1,
    phase: 'choose',
    stats: { switchWins: 0, stayWins: 0, total: 0 }
  };

  function montyInit() {
    montyState.prizeDoor = Math.floor(Math.random() * 3);
    montyState.chosenDoor = -1;
    montyState.revealedDoor = -1;
    montyState.phase = 'choose';

    for (let i = 0; i < 3; i++) {
      const el = document.getElementById('prize' + i);
      if (el) el.textContent = i === montyState.prizeDoor ? '💰' : '🐐';
    }
  }

  function montyChooseDoor(door) {
    if (montyState.phase !== 'choose') return;

    montyState.chosenDoor = door;
    montyState.phase = 'switch';

    const doors = document.querySelectorAll('.monty-door');
    doors.forEach((d, i) => {
      d.classList.remove('selected');
      if (i === door) d.classList.add('selected');
    });

    let revealOptions = [];
    for (let i = 0; i < 3; i++) {
      if (i !== door && i !== montyState.prizeDoor) revealOptions.push(i);
    }
    montyState.revealedDoor = revealOptions[Math.floor(Math.random() * revealOptions.length)];

    setTimeout(() => {
      const revealedEl = doors[montyState.revealedDoor];
      revealedEl.classList.add('opened', 'revealed-empty', 'disabled');

      document.getElementById('montyInstruction').innerHTML =
        'Door ' + (montyState.revealedDoor + 1) + ' is empty.<br>Do you <em style="color:var(--accent)">stay</em> or <em style="color:var(--accent)">switch</em>?';
      document.getElementById('montySubtext').textContent =
        'You chose door ' + (door + 1) + '. The host revealed door ' + (montyState.revealedDoor + 1) + '.';

      document.getElementById('montyButtons').style.display = 'flex';
    }, 800);
  }

  function montyDecision(choice) {
    if (montyState.phase !== 'switch') return;
    montyState.phase = 'done';

    document.getElementById('montyButtons').style.display = 'none';

    let finalDoor = montyState.chosenDoor;
    if (choice === 'switch') {
      for (let i = 0; i < 3; i++) {
        if (i !== montyState.chosenDoor && i !== montyState.revealedDoor) {
          finalDoor = i;
          break;
        }
      }
    }

    const won = finalDoor === montyState.prizeDoor;

    montyState.stats.total++;
    if (choice === 'switch' && won) montyState.stats.switchWins++;
    if (choice === 'stick' && won) montyState.stats.stayWins++;

    const doors = document.querySelectorAll('.monty-door');
    doors.forEach((d, i) => {
      d.classList.remove('selected');
      d.classList.add('disabled');
      if (i === finalDoor) d.classList.add('selected');
    });

    setTimeout(() => {
      doors.forEach((d, i) => {
        if (!d.classList.contains('opened')) {
          d.classList.add('opened');
        }
      });

      setTimeout(() => {
        document.getElementById('montyResult').style.display = 'block';
        document.getElementById('montyResultText').innerHTML = won
          ? '<span style="color:var(--accent);">You won!</span> You chose to ' + choice + '.'
          : '<span style="color:var(--text-dim);">You lost.</span> You chose to ' + choice + '.';

        document.getElementById('montyResultExplain').textContent = won
          ? (choice === 'switch'
              ? 'Switching gives you a 66.7% chance of winning. The probability transferred to the remaining door when the host opened an empty one.'
              : 'You got lucky! Staying only gives you a 33.3% chance. Try again, over many games, switching wins twice as often.')
          : (choice === 'stick'
              ? 'Staying with your first choice only gives you a 33.3% chance. The other door had a 66.7% chance. Try switching next time!'
              : 'Bad luck this round, but switching is still the optimal strategy with a 66.7% win rate. Play again to see the pattern.');

        document.getElementById('montyInstruction').textContent = won ? 'Congratulations!' : 'Better luck next time.';
        document.getElementById('montySubtext').textContent = '';

        document.getElementById('statSwitchWins').textContent = montyState.stats.switchWins;
        document.getElementById('statStayWins').textContent = montyState.stats.stayWins;
        document.getElementById('statTotal').textContent = montyState.stats.total;
      }, 600);
    }, 400);
  }

  function montyReset() {
    document.getElementById('montyResult').style.display = 'none';
    document.getElementById('montyButtons').style.display = 'none';
    document.getElementById('montyInstruction').textContent = 'Choose a door.';
    document.getElementById('montySubtext').textContent = 'Behind one of these doors is $1,000,000.';

    const doors = document.querySelectorAll('.monty-door');
    doors.forEach(d => {
      d.classList.remove('opened', 'selected', 'revealed-empty', 'disabled');
    });

    montyInit();
  }

  // ═══════════════════════════════════════
  // 100-DOOR MONTY HALL GAME
  // ═══════════════════════════════════════

  let hundredDoorState = {
    prizeDoor: -1,
    chosenDoor: -1,
    remainingDoor: -1,
    phase: 'choose', // choose | wait | done
    stats: { switchWins: 0, stayWins: 0, total: 0 }
  };

  function init100DoorGame() {
    const grid = document.getElementById('doorsGrid');
    if (!grid) return;

    grid.innerHTML = '';
    hundredDoorState.prizeDoor = Math.floor(Math.random() * 100);
    hundredDoorState.chosenDoor = -1;
    hundredDoorState.remainingDoor = -1;
    hundredDoorState.phase = 'choose';

    for (let i = 0; i < 100; i++) {
      const door = document.createElement('div');
      door.className = 'door-100';
      door.textContent = (i + 1);
      door.dataset.door = i;
      door.onclick = () => choose100Door(i);
      grid.appendChild(door);
    }
  }

  function choose100Door(doorNum) {
    if (hundredDoorState.phase !== 'choose') return;

    hundredDoorState.chosenDoor = doorNum;
    hundredDoorState.phase = 'wait';

    const doors = document.querySelectorAll('.door-100');
    doors[doorNum].classList.add('chosen-100');

    document.getElementById('hundredInstruction').innerHTML = 'Opening 98 doors...';

    setTimeout(() => {
      eliminateDoors();
    }, 500);
  }

  function eliminateDoors() {
    const doors = document.querySelectorAll('.door-100');
    const chosen = hundredDoorState.chosenDoor;
    const prize = hundredDoorState.prizeDoor;

    // The host must keep the prize door closed (and the chosen door).
    // If the player chose the prize, keep one random other door as the "remaining" door.
    let otherDoor;
    if (chosen === prize) {
      // Player chose correctly, host picks a random decoy to keep closed
      const candidates = [];
      for (let i = 0; i < 100; i++) {
        if (i !== chosen) candidates.push(i);
      }
      otherDoor = candidates[Math.floor(Math.random() * candidates.length)];
    } else {
      // Player didn't choose the prize, the prize door stays closed
      otherDoor = prize;
    }
    hundredDoorState.remainingDoor = otherDoor;

    // Eliminate 98 doors one by one (all except chosen and otherDoor)
    const toEliminate = [];
    for (let i = 0; i < 100; i++) {
      if (i !== chosen && i !== otherDoor) {
        toEliminate.push(i);
      }
    }

    let eliminated = 0;
    const eliminateInterval = setInterval(() => {
      if (eliminated >= toEliminate.length) {
        clearInterval(eliminateInterval);
        revealFinal();
        return;
      }

      const doorIdx = toEliminate[eliminated];
      doors[doorIdx].classList.add('eliminated-anim', 'eliminated');
      eliminated++;
    }, 50);
  }

  function revealFinal() {
    const doors = document.querySelectorAll('.door-100');
    const chosen = hundredDoorState.chosenDoor;
    const remaining = hundredDoorState.remainingDoor;
    const prize = hundredDoorState.prizeDoor;

    document.getElementById('hundredInstruction').innerHTML =
      'Two doors remain: Door ' + (chosen + 1) + ' (your choice) and Door ' + (remaining + 1) + '.<br>Do you <em style="color:var(--accent)">STAY</em> or <em style="color:var(--accent)">SWITCH</em>?';

    // Show buttons
    const buttonsHTML = `
      <div style="text-align: center; margin: 30px 0;">
        <button onclick="make100Decision('stay')" style="font-family: var(--mono); font-size: 11px; letter-spacing: 3px; text-transform: uppercase; color: var(--text); background: none; border: 1px solid var(--border-strong); padding: 14px 32px; cursor: pointer; margin: 0 8px; transition: all 0.3s ease;" onmouseover="this.style.borderColor='var(--accent-dim)';this.style.color='var(--accent)'" onmouseout="this.style.borderColor='var(--border-strong)';this.style.color='var(--text)'">Stay</button>
        <button onclick="make100Decision('switch')" style="font-family: var(--mono); font-size: 11px; letter-spacing: 3px; text-transform: uppercase; color: var(--bg); background: var(--accent-dim); border: 1px solid var(--accent-dim); padding: 14px 32px; cursor: pointer; margin: 0 8px; transition: all 0.3s ease;" onmouseover="this.style.background='var(--accent)'" onmouseout="this.style.background='var(--accent-dim)'">Switch</button>
      </div>
    `;
    document.getElementById('hundredInstruction').insertAdjacentHTML('afterend', buttonsHTML);
  }

  function make100Decision(choice) {
    const doors = document.querySelectorAll('.door-100');
    const chosen = hundredDoorState.chosenDoor;
    const remaining = hundredDoorState.remainingDoor;
    const prize = hundredDoorState.prizeDoor;

    let finalDoor = chosen;
    if (choice === 'switch') {
      finalDoor = remaining;
    }

    const won = finalDoor === prize;

    // Update stats
    hundredDoorState.stats.total++;
    if (choice === 'switch' && won) hundredDoorState.stats.switchWins++;
    if (choice === 'stay' && won) hundredDoorState.stats.stayWins++;

    // Highlight final door
    doors.forEach((d, i) => {
      d.classList.remove('chosen-100');
      if (i === finalDoor) {
        if (won) {
          d.classList.add('revealed-prize');
        } else {
          d.classList.add('chosen-100');
        }
      }
    });

    // Reveal prize door if different
    if (finalDoor !== prize) {
      doors[prize].classList.add('revealed-prize');
    }

    // Show result
    setTimeout(() => {
      document.getElementById('hundredResult').style.display = 'block';
      document.getElementById('hundredResultText').innerHTML = won
        ? '<span style="color:var(--accent);">You won!</span> You chose to ' + choice + ' and found the prize at Door ' + (finalDoor + 1) + '.'
        : '<span style="color:var(--text-dim);">You lost.</span> The prize was at Door ' + (prize + 1) + ', but you chose to ' + choice + ' to Door ' + (finalDoor + 1) + '.';

      document.getElementById('hundredResultExplain').textContent = won
        ? (choice === 'switch'
            ? 'Switching paid off! With 100 doors, switching gave you a 99% chance to win, while staying only had a 1% chance. Probability concentrates where the evidence points.'
            : 'Incredible luck! Staying only has a 1% chance with 100 doors. Try again and see why switching is overwhelmingly superior with this many options.')
        : (choice === 'stay'
            ? 'With 100 doors, staying with your original 1% choice almost always loses. The other door holds 99% of the probability. Try switching next time!'
            : 'Switching usually wins, but not this round. Over many games, switching wins 99% of the time with 100 doors. The evidence concentrates probability.');

      document.getElementById('stat100SwitchWins').textContent = hundredDoorState.stats.switchWins;
      document.getElementById('stat100StayWins').textContent = hundredDoorState.stats.stayWins;
      document.getElementById('stat100Total').textContent = hundredDoorState.stats.total;

      // Remove buttons
      document.querySelectorAll('#hundredInstruction + div').forEach(el => el.remove());
    }, 300);
  }

  function reset100DoorGame() {
    document.getElementById('hundredResult').style.display = 'none';
    document.getElementById('hundredInstruction').innerHTML = 'Choose a door.';

    // Remove any lingering buttons
    document.querySelectorAll('#hundredInstruction + div').forEach(el => el.remove());

    init100DoorGame();
  }

  // Initialize the 100-door game when intro page opens
  function initHundredDoorGame() {
    setTimeout(() => {
      init100DoorGame();
    }, 100);
  }

  // ═══════════════════════════════════════
  // FORMS & UTILITIES
  // ═══════════════════════════════════════

  function handleSubscribe(e, gateId) {
    e.preventDefault();
    const form = e.target;
    const btn = form.querySelector('button');
    btn.textContent = 'Sent!';
    setTimeout(() => {
      btn.textContent = 'Continue';
    }, 2000);
  }

  // ═══════════════════════════════════════
  // THEME TOGGLE (LIGHT / DARK MODE)
  // ═══════════════════════════════════════

  const sunSVG = '<svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.2"><circle cx="8" cy="8" r="3.5"/><line x1="8" y1="0.5" x2="8" y2="2.5"/><line x1="8" y1="13.5" x2="8" y2="15.5"/><line x1="0.5" y1="8" x2="2.5" y2="8"/><line x1="13.5" y1="8" x2="15.5" y2="8"/><line x1="2.7" y1="2.7" x2="4.1" y2="4.1"/><line x1="11.9" y1="11.9" x2="13.3" y2="13.3"/><line x1="2.7" y1="13.3" x2="4.1" y2="11.9"/><line x1="11.9" y1="4.1" x2="13.3" y2="2.7"/></svg>';
  const moonSVG = '<svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.2"><path d="M13.5 8.5a5.5 5.5 0 0 1-6-6 5.5 5.5 0 1 0 6 6z"/></svg>';

  function toggleTheme() {
    document.body.classList.toggle('light-mode');
    const btn = document.getElementById('themeToggle');
    const isLight = document.body.classList.contains('light-mode');
    btn.innerHTML = isLight ? moonSVG : sunSVG;
    try { localStorage.setItem('byz-theme', isLight ? 'light' : 'dark'); } catch(e) {}
  }

  function toggleDetailCard(cardId) {
    const card = document.getElementById(cardId);
    if (card) card.classList.toggle('open');
  }

  function toggleExpandCard(cardId) {
    const card = document.getElementById(cardId);
    if (!card) return;
    card.classList.toggle('expanded');
    const btn = card.querySelector('.read-more-btn');
    if (btn) btn.textContent = card.classList.contains('expanded') ? 'Read less' : 'Read more';
  }

  // Restore saved theme preference on load
  (function restoreTheme() {
    try {
      if (localStorage.getItem('byz-theme') === 'light') {
        document.body.classList.add('light-mode');
        const btn = document.getElementById('themeToggle');
        if (btn) btn.innerHTML = moonSVG;
      }
    } catch(e) {}
  })();

  // Initialize loader on page load
  window.addEventListener('DOMContentLoaded', initLoader);

</script>

</body>
</html>
